import './polyfills.server.mjs';
import{a as pe}from"./chunk-OMB67UTP.mjs";import{a as A}from"./chunk-JLY27ZYM.mjs";import{a as ne}from"./chunk-CBJ65FJ6.mjs";import"./chunk-4BQ7GT4S.mjs";import{a as Ce}from"./chunk-5NTY5626.mjs";import{a as ie,b as oe,c as ae,d as re,e as le,f as de,g as ce,h as se,i as me,j as ue,k as ge,n as he,p as _e}from"./chunk-MJLRGOWU.mjs";import{a as te}from"./chunk-2MWTOOCD.mjs";import{Bb as B,Cb as F,Da as d,Eb as r,Ec as X,Fb as h,Gb as D,Hb as j,Jb as w,Jc as Z,Kb as P,Lb as O,Mc as z,Na as I,Nc as ee,O as G,S as H,Sa as Y,Y as m,Yb as U,Z as u,db as _,eb as p,fb as q,ga as f,gb as R,hb as v,ib as y,jb as C,k as J,kb as i,lb as o,mb as Q,o as b,qa as K,sb as S,ub as g,w as x,wb as s}from"./chunk-LYSTPZ4M.mjs";import{a as k,b as T}from"./chunk-N7QBYMCK.mjs";var N=class l{constructor(t){this.http=t}apiUrl=`${te.apiUrl}/schedules`;getSchedules(t){let e=new z;return t&&(t.date&&(e=e.set("date",t.date.toISOString())),t.coachId&&(e=e.set("coachId",t.coachId)),t.studentId&&(e=e.set("studentId",t.studentId)),t.program&&(e=e.set("program",t.program)),t.status&&(e=e.set("status",t.status))),this.http.get(this.apiUrl,{params:e}).pipe(b(a=>a.data||[]),x(this.handleError))}getScheduleById(t){return this.http.get(`${this.apiUrl}/${t}`).pipe(b(e=>{if(!e.data)throw new Error("Schedule not found");return e.data}),x(this.handleError))}getSchedulesByDateRange(t,e){let a=new z().set("startDate",t.toISOString()).set("endDate",e.toISOString());return this.http.get(`${this.apiUrl}/range`,{params:a}).pipe(b(n=>n.data||[]),x(this.handleError))}getSchedulesByCoach(t){return this.http.get(`${this.apiUrl}/coach/${t}`).pipe(b(e=>e.data||[]),x(this.handleError))}getSchedulesByStudent(t){return this.http.get(`${this.apiUrl}/student/${t}`).pipe(b(e=>e.data||[]),x(this.handleError))}createSchedule(t){return this.http.post(this.apiUrl,t).pipe(b(e=>{if(!e.data)throw new Error("Failed to create schedule");return e.data}),x(this.handleError))}updateSchedule(t,e){return this.http.put(`${this.apiUrl}/${t}`,e).pipe(b(a=>{if(!a.data)throw new Error("Failed to update schedule");return a.data}),x(this.handleError))}deleteSchedule(t){return this.http.delete(`${this.apiUrl}/${t}`).pipe(b(e=>({success:e.success,message:e.message||"Schedule deleted successfully"})),x(this.handleError))}updateScheduleStatus(t,e){return this.http.patch(`${this.apiUrl}/${t}/status`,{status:e}).pipe(b(a=>{if(!a.data)throw new Error("Failed to update status");return a.data}),x(this.handleError))}toggleReminder(t,e){return this.http.patch(`${this.apiUrl}/${t}/reminder`,{reminderEnabled:e}).pipe(b(a=>{if(!a.data)throw new Error("Failed to toggle reminder");return a.data}),x(this.handleError))}updateReminderSettings(t,e){return this.http.patch(`${this.apiUrl}/${t}/reminder-settings`,e).pipe(b(a=>{if(!a.data)throw new Error("Failed to update reminder settings");return a.data}),x(this.handleError))}sendWhatsAppReminder(t){return this.http.post(`${this.apiUrl}/${t}/send-whatsapp-reminder`,{}).pipe(x(this.handleError))}checkConflicts(t){return this.http.post(`${this.apiUrl}/check-conflicts`,t).pipe(x(this.handleError))}handleError(t){let e="An unknown error occurred";return t.error instanceof ErrorEvent?e=`Error: ${t.error.message}`:t.error?.message?e=t.error.message:t.message?e=t.message:e=`Server returned code ${t.status}: ${t.statusText}`,console.error("Schedule Service Error:",e),J(()=>new Error(e))}static \u0275fac=function(e){return new(e||l)(H(ee))};static \u0275prov=G({token:l,factory:l.\u0275fac,providedIn:"root"})};var Me=(l,t)=>t.value,V=(l,t)=>t._id;function Oe(l,t){if(l&1){let e=S();i(0,"button",17),g("click",function(){m(e);let n=s();return u(n.openCreateModal())}),i(1,"span"),r(2,"\u2795"),o(),i(3,"span"),r(4,"Buat Jadwal Baru"),o()()}}function ve(l,t){if(l&1&&(i(0,"option",10),r(1),o()),l&2){let e=t.$implicit;C("value",e._id),d(),h(e.fullName)}}function ye(l,t){if(l&1){let e=S();i(0,"div",7)(1,"label"),r(2,"Filter Pelatih:"),o(),i(3,"select",8),g("ngModelChange",function(n){m(e);let c=s();return u(c.filterCoach.set(n))}),i(4,"option",9),r(5,"Semua Pelatih"),o(),v(6,ve,2,2,"option",10,V),o()()}if(l&2){let e=s();d(3),C("ngModel",e.filterCoach()),d(3),y(e.coaches())}}function De(l,t){if(l&1&&(i(0,"option",10),r(1),o()),l&2){let e=t.$implicit;C("value",e),d(),h(e)}}function Ee(l,t){if(l&1&&(i(0,"option",10),r(1),o()),l&2){let e=t.$implicit;C("value",e.value),d(),h(e.label)}}function ke(l,t){l&1&&(i(0,"div",13),Q(1,"div",18),i(2,"p"),r(3,"Memuat jadwal..."),o()())}function Te(l,t){if(l&1){let e=S();i(0,"div",31),g("click",function(n){let c=m(e).$implicit;return s(4).openViewModal(c),u(n.stopPropagation())}),i(1,"span",32),r(2),o(),i(3,"span",33),r(4),o()()}if(l&2){let e=t.$implicit,a=s(4);B("background",a.getStatusColor(e.status)),d(2),h(e.startTime),d(2),h(e.studentName)}}function Ie(l,t){if(l&1&&(i(0,"div",30),r(1),o()),l&2){let e=s(2).$implicit;d(),D("+",e.schedules.length-2," lagi")}}function Ae(l,t){if(l&1&&(i(0,"div",28),v(1,Te,5,4,"div",29,V),_(3,Ie,2,1,"div",30),o()),l&2){let e=s().$implicit;d(),y(e.schedules.slice(0,2)),d(2),p(e.schedules.length>2?3:-1)}}function Ve(l,t){if(l&1){let e=S();i(0,"div",26),g("click",function(){let n=m(e).$implicit,c=s(2);return u(c.selectDate(n.date))}),i(1,"div",27),r(2),o(),_(3,Ae,4,1,"div",28),o()}if(l&2){let e=t.$implicit;F("other-month",!e.isCurrentMonth)("today",e.isToday)("has-schedules",e.schedules.length>0),d(2),h(e.dayNumber),d(),p(e.schedules.length>0?3:-1)}}function Be(l,t){if(l&1){let e=S();i(0,"div",14)(1,"div",19)(2,"button",20),g("click",function(){m(e);let n=s();return u(n.previousMonth())}),r(3,"\u2039 Bulan Lalu"),o(),i(4,"h2",21),r(5),o(),i(6,"button",20),g("click",function(){m(e);let n=s();return u(n.nextMonth())}),r(7,"Bulan Depan \u203A"),o(),i(8,"button",22),g("click",function(){m(e);let n=s();return u(n.goToToday())}),r(9,"Hari Ini"),o()(),i(10,"div",23)(11,"div",24),r(12,"Minggu"),o(),i(13,"div",24),r(14,"Senin"),o(),i(15,"div",24),r(16,"Selasa"),o(),i(17,"div",24),r(18,"Rabu"),o(),i(19,"div",24),r(20,"Kamis"),o(),i(21,"div",24),r(22,"Jumat"),o(),i(23,"div",24),r(24,"Sabtu"),o(),v(25,Ve,4,8,"div",25,q),o()()}if(l&2){let e=s();d(5),h(e.getMonthName()),d(20),y(e.calendarDays())}}function Fe(l,t){l&1&&r(0,' Klik "Buat Jadwal Baru" untuk menambahkan jadwal ')}function Ne(l,t){l&1&&r(0," Belum ada jadwal untuk Anda ")}function We(l,t){if(l&1&&(i(0,"div",35)(1,"span",37),r(2,"\u{1F4C5}"),o(),i(3,"h3"),r(4,"Belum Ada Jadwal"),o(),i(5,"p"),_(6,Fe,1,0)(7,Ne,1,0),o()()),l&2){let e=s(2);d(6),p(e.isAdmin()?6:7)}}function Le(l,t){l&1&&(i(0,"span",50),r(1,"\u2705 Pengingat WA Aktif"),o())}function Re(l,t){l&1&&(i(0,"span",51),r(1,"\u274C Pengingat WA Nonaktif"),o())}function je(l,t){if(l&1){let e=S();i(0,"button",56),g("click",function(n){m(e);let c=s().$implicit;return s(3).openEditModal(c),u(n.stopPropagation())}),r(1," \u270F\uFE0F "),o()}}function Ue(l,t){if(l&1){let e=S();i(0,"div",39),g("click",function(){let n=m(e).$implicit,c=s(3);return u(c.openViewModal(n))}),i(1,"div",40)(2,"div",2)(3,"span",41),r(4),o(),i(5,"span",42),r(6),o()(),i(7,"div",3)(8,"span",43),r(9),o()()(),i(10,"div",44)(11,"div",45)(12,"span",46),r(13,"\u{1F468}\u200D\u{1F393} Siswa:"),o(),i(14,"span",47),r(15),o()(),i(16,"div",45)(17,"span",46),r(18,"\u{1F468}\u200D\u{1F3EB} Pelatih:"),o(),i(19,"span",47),r(20),o()(),i(21,"div",45)(22,"span",46),r(23,"\u{1F3CA} Program:"),o(),i(24,"span",47),r(25),o()(),i(26,"div",45)(27,"span",46),r(28,"\u{1F4CD} Lokasi:"),o(),i(29,"span",47),r(30),o()()(),i(31,"div",48)(32,"div",49),_(33,Le,2,0,"span",50)(34,Re,2,0,"span",51),o(),i(35,"div",52),_(36,je,2,0,"button",53),i(37,"button",54),g("click",function(n){let c=m(e).$implicit;return s(3).toggleReminder(c),u(n.stopPropagation())}),r(38),o(),i(39,"button",55),g("click",function(n){let c=m(e).$implicit;return s(3).sendWhatsAppReminder(c._id),u(n.stopPropagation())}),r(40," \u{1F4F1} "),o()()()()}if(l&2){let e=t.$implicit,a=s(3);d(4),D(" ",a.formatDate(e.date)," "),d(2),j(" ",e.startTime," - ",e.endTime," "),d(2),B("background",a.getStatusColor(e.status)),d(),D(" ",a.getStatusLabel(e.status)," "),d(6),h(e.studentName),d(5),h(e.coachName),d(5),h(e.program),d(5),h(e.location),d(3),p(e.reminderEnabled?33:34),d(3),p(a.canEditSchedule(e)?36:-1),d(2),D(" ",e.reminderEnabled?"\u{1F514}":"\u{1F515}"," ")}}function ze(l,t){if(l&1&&(i(0,"div",36),v(1,Ue,41,13,"div",38,V),o()),l&2){let e=s(2);d(),y(e.filteredSchedules())}}function $e(l,t){if(l&1&&(i(0,"div",15)(1,"div",34)(2,"h3"),r(3),o()(),_(4,We,8,1,"div",35)(5,ze,3,0,"div",36),o()),l&2){let e=s();d(3),D("Daftar Jadwal (",e.filteredSchedules().length," jadwal)"),d(),p(e.filteredSchedules().length===0?4:5)}}function Je(l,t){l&1&&r(0," \u2795 Buat Jadwal Baru ")}function Ge(l,t){l&1&&r(0," \u270F\uFE0F Edit Jadwal ")}function He(l,t){l&1&&r(0," \u{1F4C5} Detail Jadwal ")}function Ke(l,t){if(l&1&&(i(0,"div",66)(1,"span",64),r(2,"Catatan:"),o(),i(3,"p",65),r(4),o()()),l&2){let e=s(3);d(4),h(e.selectedSchedule().notes)}}function Ye(l,t){if(l&1){let e=S();i(0,"button",72),g("click",function(){m(e);let n=s(3);return u(n.openEditModal(n.selectedSchedule()))}),r(1," \u270F\uFE0F Edit "),o()}}function qe(l,t){if(l&1){let e=S();i(0,"button",73),g("click",function(){m(e);let n=s(3);return u(n.deleteSchedule(n.selectedSchedule()._id))}),r(1," \u{1F5D1}\uFE0F Hapus "),o()}}function Qe(l,t){if(l&1){let e=S();i(0,"div",62)(1,"div",63)(2,"span",64),r(3,"Tanggal:"),o(),i(4,"span",65),r(5),o()(),i(6,"div",63)(7,"span",64),r(8,"Waktu:"),o(),i(9,"span",65),r(10),o()(),i(11,"div",63)(12,"span",64),r(13,"Durasi:"),o(),i(14,"span",65),r(15),o()(),i(16,"div",63)(17,"span",64),r(18,"Siswa:"),o(),i(19,"span",65),r(20),o()(),i(21,"div",63)(22,"span",64),r(23,"No. WA Siswa:"),o(),i(24,"span",65),r(25),o()(),i(26,"div",63)(27,"span",64),r(28,"Pelatih:"),o(),i(29,"span",65),r(30),o()(),i(31,"div",63)(32,"span",64),r(33,"Program:"),o(),i(34,"span",65),r(35),o()(),i(36,"div",63)(37,"span",64),r(38,"Lokasi:"),o(),i(39,"span",65),r(40),o()(),i(41,"div",63)(42,"span",64),r(43,"Status:"),o(),i(44,"span",43),r(45),o()(),i(46,"div",63)(47,"span",64),r(48,"Pengingat WA:"),o(),i(49,"span",65),r(50),o()(),_(51,Ke,5,1,"div",66),o(),i(52,"div",67),_(53,Ye,2,0,"button",68),i(54,"button",69),g("click",function(){m(e);let n=s(2);return u(n.toggleReminder(n.selectedSchedule()))}),r(55),o(),i(56,"button",70),g("click",function(){m(e);let n=s(2);return u(n.sendWhatsAppReminder(n.selectedSchedule()._id))}),r(57," \u{1F4F1} Kirim WA Sekarang "),o(),_(58,qe,2,0,"button",71),o()}if(l&2){let e=s(2);d(5),h(e.formatDate(e.selectedSchedule().date)),d(5),j("",e.selectedSchedule().startTime," - ",e.selectedSchedule().endTime),d(5),D("",e.selectedSchedule().duration," menit"),d(5),h(e.selectedSchedule().studentName),d(5),h(e.selectedSchedule().studentPhone),d(5),h(e.selectedSchedule().coachName),d(5),h(e.selectedSchedule().program),d(5),h(e.selectedSchedule().location),d(4),B("background",e.getStatusColor(e.selectedSchedule().status)),d(),D(" ",e.getStatusLabel(e.selectedSchedule().status)," "),d(5),D(" ",e.selectedSchedule().reminderEnabled?"\u2705 Aktif":"\u274C Nonaktif"," "),d(),p(e.selectedSchedule().notes?51:-1),d(2),p(e.canEditSchedule(e.selectedSchedule())?53:-1),d(2),D(" ",e.selectedSchedule().reminderEnabled?"\u{1F515} Nonaktifkan":"\u{1F514} Aktifkan"," Pengingat "),d(3),p(e.canDeleteSchedule(e.selectedSchedule())?58:-1)}}function Xe(l,t){if(l&1&&(i(0,"option",10),r(1),o()),l&2){let e=t.$implicit;C("value",e._id),d(),h(e.fullName)}}function Ze(l,t){if(l&1&&(i(0,"option",10),r(1),o()),l&2){let e=t.$implicit;C("value",e._id),d(),h(e.fullName)}}function et(l,t){if(l&1&&(i(0,"option",10),r(1),o()),l&2){let e=t.$implicit;C("value",e),d(),h(e)}}function tt(l,t){if(l&1&&(i(0,"option",10),r(1),o()),l&2){let e=t.$implicit;C("value",e.value),d(),h(e.label)}}function nt(l,t){l&1&&(i(0,"small",86),r(1,"\u2705 Coach dapat mengubah status"),o())}function it(l,t){l&1&&(i(0,"small",86),r(1,"\u2705 Coach dapat menambahkan catatan"),o())}function ot(l,t){l&1&&(i(0,"small",86),r(1,"\u26A0\uFE0F Hanya admin yang dapat mengubah pengingat"),o())}function at(l,t){l&1&&r(0," \u2795 Buat Jadwal ")}function rt(l,t){l&1&&r(0," \u{1F4BE} Simpan Perubahan ")}function lt(l,t){if(l&1){let e=S();i(0,"form",74)(1,"div",75)(2,"div",76)(3,"label"),r(4,"Siswa *"),o(),i(5,"select",77),O("ngModelChange",function(n){m(e);let c=s(2);return P(c.formData.studentId,n)||(c.formData.studentId=n),u(n)}),i(6,"option",9),r(7,"Pilih Siswa"),o(),v(8,Xe,2,2,"option",10,V),o()(),i(10,"div",76)(11,"label"),r(12,"Pelatih *"),o(),i(13,"select",78),O("ngModelChange",function(n){m(e);let c=s(2);return P(c.formData.coachId,n)||(c.formData.coachId=n),u(n)}),i(14,"option",9),r(15,"Pilih Pelatih"),o(),v(16,Ze,2,2,"option",10,V),o()()(),i(18,"div",75)(19,"div",76)(20,"label"),r(21,"Program *"),o(),i(22,"select",79),O("ngModelChange",function(n){m(e);let c=s(2);return P(c.formData.program,n)||(c.formData.program=n),u(n)}),i(23,"option",9),r(24,"Pilih Program"),o(),v(25,et,2,2,"option",10,R),o()(),i(27,"div",76)(28,"label"),r(29,"Lokasi *"),o(),i(30,"input",80),O("ngModelChange",function(n){m(e);let c=s(2);return P(c.formData.location,n)||(c.formData.location=n),u(n)}),o()()(),i(31,"div",75)(32,"div",76)(33,"label"),r(34,"Tanggal *"),o(),i(35,"input",81),O("ngModelChange",function(n){m(e);let c=s(2);return P(c.formData.date,n)||(c.formData.date=n),u(n)}),o()(),i(36,"div",76)(37,"label"),r(38,"Jam Mulai *"),o(),i(39,"input",82),O("ngModelChange",function(n){m(e);let c=s(2);return P(c.formData.startTime,n)||(c.formData.startTime=n),u(n)}),g("change",function(){m(e);let n=s(2);return u(n.calculateDuration())}),o()(),i(40,"div",76)(41,"label"),r(42,"Jam Selesai *"),o(),i(43,"input",83),O("ngModelChange",function(n){m(e);let c=s(2);return P(c.formData.endTime,n)||(c.formData.endTime=n),u(n)}),g("change",function(){m(e);let n=s(2);return u(n.calculateDuration())}),o()()(),i(44,"div",75)(45,"div",76)(46,"label"),r(47,"Durasi (menit)"),o(),i(48,"input",84),O("ngModelChange",function(n){m(e);let c=s(2);return P(c.formData.duration,n)||(c.formData.duration=n),u(n)}),o()(),i(49,"div",76)(50,"label"),r(51,"Status *"),o(),i(52,"select",85),O("ngModelChange",function(n){m(e);let c=s(2);return P(c.formData.status,n)||(c.formData.status=n),u(n)}),v(53,tt,2,2,"option",10,Me),o(),_(55,nt,2,0,"small",86),o()(),i(56,"div",87)(57,"label"),r(58,"Catatan"),o(),i(59,"textarea",88),O("ngModelChange",function(n){m(e);let c=s(2);return P(c.formData.notes,n)||(c.formData.notes=n),u(n)}),o(),_(60,it,2,0,"small",86),o(),i(61,"div",89)(62,"label",90)(63,"input",91),O("ngModelChange",function(n){m(e);let c=s(2);return P(c.formData.reminderEnabled,n)||(c.formData.reminderEnabled=n),u(n)}),o(),i(64,"span"),r(65,"\u{1F514} Aktifkan Pengingat WhatsApp (24 jam sebelumnya)"),o()(),_(66,ot,2,0,"small",86),o()(),i(67,"div",67)(68,"button",72),g("click",function(){m(e);let n=s(2);return u(n.closeModal())}),r(69," Batal "),o(),i(70,"button",17),g("click",function(){m(e);let n=s(2);return u(n.saveSchedule())}),_(71,at,1,0)(72,rt,1,0),o()()}if(l&2){let e=s(2);d(5),w("ngModel",e.formData.studentId),C("disabled",e.isCoach()),d(3),y(e.students()),d(5),w("ngModel",e.formData.coachId),C("disabled",e.isCoach()),d(3),y(e.coaches()),d(6),w("ngModel",e.formData.program),C("disabled",e.isCoach()),d(3),y(e.programs),d(5),w("ngModel",e.formData.location),C("disabled",e.isCoach()),d(5),w("ngModel",e.formData.date),C("disabled",e.isCoach()),d(4),w("ngModel",e.formData.startTime),C("disabled",e.isCoach()),d(4),w("ngModel",e.formData.endTime),C("disabled",e.isCoach()),d(5),w("ngModel",e.formData.duration),d(4),w("ngModel",e.formData.status),d(),y(e.statusOptions),d(2),p(e.isCoach()?55:-1),d(4),w("ngModel",e.formData.notes),d(),p(e.isCoach()?60:-1),d(3),w("ngModel",e.formData.reminderEnabled),C("disabled",e.isCoach()),d(3),p(e.isCoach()?66:-1),d(5),p(e.modalMode()==="create"?71:72)}}function dt(l,t){if(l&1){let e=S();i(0,"div",57),g("click",function(){m(e);let n=s();return u(n.closeModal())}),i(1,"div",58),g("click",function(n){return m(e),u(n.stopPropagation())}),i(2,"div",59)(3,"h2"),_(4,Je,1,0)(5,Ge,1,0)(6,He,1,0),o(),i(7,"button",60),g("click",function(){m(e);let n=s();return u(n.closeModal())}),r(8,"\u2715"),o()(),i(9,"div",61),_(10,Qe,59,17)(11,lt,73,23),o()()()}if(l&2){let e=s();d(4),p(e.modalMode()==="create"?4:e.modalMode()==="edit"?5:6),d(6),p(e.modalMode()==="view"&&e.selectedSchedule()?10:11)}}var fe=class l{constructor(t,e,a,n,c){this.scheduleService=t;this.coachService=e;this.studentService=a;this.authService=n;this.platformId=c;this.isBrowser=Z(this.platformId),console.log("\u{1F310} Platform:",this.isBrowser?"Browser":"Server")}isBrowser;schedules=f([]);coaches=f([]);students=f([]);selectedDate=f(new Date);currentMonth=f(new Date);selectedSchedule=f(null);isLoading=f(!1);showModal=f(!1);modalMode=f("view");filterCoach=f("");filterProgram=f("");filterStatus=f("");currentUser=f(null);userRole=f("guest");isAdmin=f(!1);isCoach=f(!1);viewMode=f("calendar");calendarDays=U(()=>{try{return this.generateCalendarDays()}catch(t){return console.error("Error generating calendar days:",t),[]}});filteredSchedules=U(()=>{try{let t=this.schedules()||[],e=this.currentUser(),a=this.filterCoach()||(this.isCoach()&&e?.coachId?this.extractId(e.coachId):null);return a&&(t=t.filter(n=>this.extractId(n.coachId)?.toString()===a)),this.filterProgram()&&(t=t.filter(n=>n.program===this.filterProgram())),this.filterStatus()&&(t=t.filter(n=>n.status===this.filterStatus())),t}catch(t){return console.error("Error in filteredSchedules computed:",t),[]}});programs=["Baby Swimming","Kids Class","Teen & Adult","Private Training","Competition Team"];statusOptions=[{value:"scheduled",label:"Terjadwal",color:"#3b6fad"},{value:"completed",label:"Selesai",color:"#4caf50"},{value:"cancelled",label:"Dibatalkan",color:"#f44336"},{value:"rescheduled",label:"Dijadwalkan Ulang",color:"#ff9800"}];formData=this.getInitialFormData();reminderSettings={enabled:!0,beforeHours:24};ngOnInit(){try{let t=this.authService.getUser();if(this.currentUser.set(t),this.userRole.set(t?.role||"guest"),this.isAdmin.set(t?.role==="admin"||t?.role==="superadmin"),this.isCoach.set(t?.role==="coach"),console.log("\u{1F464} Schedule - User role:",this.userRole()),console.log("\u{1F510} Is Admin:",this.isAdmin()),console.log("\u{1F468}\u200D\u{1F3EB} Is Coach:",this.isCoach()),this.isCoach()&&t?.coachId){let e=this.extractId(t.coachId);e&&(this.filterCoach.set(e),console.log("\u{1F50D} Auto-filtering schedules for coach:",e))}this.loadCoaches(),this.loadStudents()}catch(t){console.error("Error in ngOnInit:",t)}}ngAfterViewInit(){this.isBrowser&&setTimeout(()=>{this.loadSchedules()},0)}getInitialFormData(){return{studentId:"",coachId:"",program:"",date:new Date,startTime:"08:00",endTime:"09:00",duration:60,location:"Kolam Utama",notes:"",status:"scheduled",reminderEnabled:!0,reminderSent:!1}}extractId(t){return t?typeof t=="string"?t:typeof t=="object"&&t._id?t._id.toString():t.toString():null}showSweetAlert(t){if(!this.isBrowser||typeof window>"u")return console.warn("SweetAlert skipped - not in browser"),Promise.resolve({isConfirmed:!1});try{return A.fire(t)}catch(e){return console.error("SweetAlert error:",e),Promise.resolve({isConfirmed:!1})}}canCreateSchedule(){return this.isAdmin()}canEditSchedule(t){if(this.isAdmin())return!0;if(this.isCoach()){let e=this.extractId(t.coachId),a=this.extractId(this.currentUser()?.coachId);return e===a}return!1}canDeleteSchedule(t){return this.isAdmin()}canEditFullSchedule(){return this.isAdmin()}loadSchedules(){if(!this.isBrowser){console.log("\u23ED\uFE0F Skipping schedule load - not in browser");return}try{this.isLoading.set(!0);let t=this.currentMonth();if(!t){console.error("Current month is undefined"),this.isLoading.set(!1);return}let e=new Date(t.getFullYear(),t.getMonth(),1),a=new Date(t.getFullYear(),t.getMonth()+1,0);this.scheduleService.getSchedulesByDateRange(e,a).subscribe({next:n=>{let c=(n||[]).map(M=>T(k({},M),{coachId:this.extractId(M.coachId)||M.coachId,studentId:this.extractId(M.studentId)||M.studentId}));this.schedules.set(c),this.isLoading.set(!1),console.log("\u2705 Loaded",c.length,"schedules")},error:n=>{console.error("\u274C Error loading schedules:",n),this.schedules.set([]),this.isLoading.set(!1),this.isBrowser&&this.showSweetAlert({icon:"error",title:"Gagal Memuat Data",text:"Gagal memuat jadwal. Silakan coba lagi.",confirmButtonColor:"#3b6fad"})}})}catch(t){console.error("\u274C Exception in loadSchedules:",t),this.isLoading.set(!1),this.schedules.set([])}}loadCoaches(){try{this.coachService.getCoaches().subscribe({next:t=>{let e=(t||[]).filter(a=>a.status==="Aktif");this.coaches.set(e),console.log("\u2705 Loaded",e.length,"coaches")},error:t=>{console.error("\u274C Error loading coaches:",t),this.coaches.set([])}})}catch(t){console.error("\u274C Exception in loadCoaches:",t),this.coaches.set([])}}loadStudents(){try{this.studentService.getStudents().subscribe({next:t=>{let e=(t||[]).filter(a=>a.status==="Aktif");this.students.set(e),console.log("\u2705 Loaded",e.length,"students")},error:t=>{console.error("\u274C Error loading students:",t),this.students.set([])}})}catch(t){console.error("\u274C Exception in loadStudents:",t),this.students.set([])}}generateCalendarDays(){try{let t=this.currentMonth();if(!t)return console.warn("Current month is undefined"),[];let e=t.getFullYear(),a=t.getMonth(),n=new Date(e,a,1),c=new Date(n);c.setDate(c.getDate()-n.getDay());let M=[],$=new Date;$.setHours(0,0,0,0);let xe=this.filteredSchedules()||[];for(let W=0;W<42;W++){let E=new Date(c);E.setDate(c.getDate()+W);let Se=xe.filter(L=>{if(!L||!L.date)return!1;try{return new Date(L.date).toDateString()===E.toDateString()}catch{return!1}});M.push({date:E,dayNumber:E.getDate(),isCurrentMonth:E.getMonth()===a,isToday:E.toDateString()===$.toDateString(),schedules:Se})}return M}catch(t){return console.error("Error in generateCalendarDays:",t),[]}}previousMonth(){try{let t=new Date(this.currentMonth());t.setMonth(t.getMonth()-1),this.currentMonth.set(t),this.loadSchedules()}catch(t){console.error("Error in previousMonth:",t)}}nextMonth(){try{let t=new Date(this.currentMonth());t.setMonth(t.getMonth()+1),this.currentMonth.set(t),this.loadSchedules()}catch(t){console.error("Error in nextMonth:",t)}}goToToday(){try{this.currentMonth.set(new Date),this.loadSchedules()}catch(t){console.error("Error in goToToday:",t)}}selectDate(t){this.selectedDate.set(t)}openCreateModal(){if(!this.canCreateSchedule()){this.showSweetAlert({icon:"error",title:"Akses Ditolak",text:"Anda tidak memiliki akses untuk membuat jadwal!",confirmButtonColor:"#3b6fad"});return}try{let e=new Date(this.selectedDate()).toISOString().split("T")[0];this.formData=T(k({},this.getInitialFormData()),{date:e}),this.modalMode.set("create"),this.showModal.set(!0)}catch(t){console.error("Error in openCreateModal:",t)}}openEditModal(t){if(!this.canEditSchedule(t)){this.showSweetAlert({icon:"error",title:"Akses Ditolak",text:"Anda tidak memiliki akses untuk mengedit jadwal ini!",confirmButtonColor:"#3b6fad"});return}try{this.selectedSchedule.set(t);let a=new Date(t.date).toISOString().split("T")[0];this.formData=T(k({},t),{studentId:this.extractId(t.studentId)||"",coachId:this.extractId(t.coachId)||"",date:a,startTime:t.startTime||"08:00",endTime:t.endTime||"09:00",duration:t.duration||60,location:t.location||"Kolam Utama",program:t.program||"",status:t.status||"scheduled",notes:t.notes||"",reminderEnabled:t.reminderEnabled!==!1,reminderSent:t.reminderSent||!1}),this.modalMode.set("edit"),this.showModal.set(!0)}catch(e){console.error("Error in openEditModal:",e)}}openViewModal(t){this.selectedSchedule.set(t),this.modalMode.set("view"),this.showModal.set(!0)}closeModal(){this.showModal.set(!1),this.selectedSchedule.set(null),this.formData=this.getInitialFormData()}saveSchedule(){this.modalMode()==="create"?this.createSchedule():this.modalMode()==="edit"&&this.updateSchedule()}createSchedule(){this.isLoading.set(!0);let t=this.students().find(n=>n._id===this.formData.studentId),e=this.coaches().find(n=>n._id===this.formData.coachId);if(!t||!e){this.showSweetAlert({icon:"error",title:"Data Tidak Lengkap",text:"Siswa atau Pelatih tidak ditemukan!",confirmButtonColor:"#3b6fad"}),this.isLoading.set(!1);return}let a=T(k({},this.formData),{studentName:t.fullName,studentPhone:t.phone,coachName:e.fullName,coachPhone:e.phone||""});this.scheduleService.createSchedule(a).subscribe({next:n=>{this.schedules.update(c=>[...c,n]),this.closeModal(),this.isLoading.set(!1),this.showSweetAlert({icon:"success",title:"Berhasil!",text:"Jadwal berhasil dibuat",timer:2e3,showConfirmButton:!1}),this.loadSchedules()},error:n=>{console.error("\u274C Error creating schedule:",n),this.isLoading.set(!1),this.showSweetAlert({icon:"error",title:"Gagal!",text:n.message||"Gagal membuat jadwal",confirmButtonColor:"#3b6fad"})}})}updateSchedule(){if(!this.selectedSchedule()?._id)return;this.isLoading.set(!0);let t;if(this.isCoach())t={status:this.formData.status,notes:this.formData.notes},console.log("\u{1F468}\u200D\u{1F3EB} Coach updating (limited):",t);else{let e=this.students().find(n=>n._id===this.formData.studentId),a=this.coaches().find(n=>n._id===this.formData.coachId);if(!e||!a){this.showSweetAlert({icon:"error",title:"Data Tidak Lengkap",text:"Siswa atau Pelatih tidak ditemukan!",confirmButtonColor:"#3b6fad"}),this.isLoading.set(!1);return}t=T(k({},this.formData),{studentName:e.fullName,studentPhone:e.phone,coachName:a.fullName,coachPhone:a.phone||""}),console.log("\u{1F510} Admin updating (full):",t)}this.scheduleService.updateSchedule(this.selectedSchedule()._id,t).subscribe({next:e=>{this.schedules.update(a=>a.map(n=>n._id===e._id?e:n)),this.closeModal(),this.isLoading.set(!1),this.showSweetAlert({icon:"success",title:"Berhasil!",text:"Jadwal berhasil diupdate",timer:2e3,showConfirmButton:!1}),this.loadSchedules()},error:e=>{console.error("\u274C Error updating schedule:",e),this.isLoading.set(!1),this.showSweetAlert({icon:"error",title:"Gagal!",text:e.message||"Gagal mengupdate jadwal",confirmButtonColor:"#3b6fad"})}})}async deleteSchedule(t){let e=this.schedules().find(n=>n._id===t);if(e&&!this.canDeleteSchedule(e)){this.showSweetAlert({icon:"error",title:"Akses Ditolak",text:"Anda tidak memiliki akses untuk menghapus jadwal!",confirmButtonColor:"#3b6fad"});return}(await this.showSweetAlert({title:"Hapus Jadwal?",text:"Apakah Anda yakin ingin menghapus jadwal ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#f44336",cancelButtonColor:"#999",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed&&(this.isLoading.set(!0),this.scheduleService.deleteSchedule(t).subscribe({next:()=>{this.schedules.update(n=>n.filter(c=>c._id!==t)),this.closeModal(),this.isLoading.set(!1),this.showSweetAlert({icon:"success",title:"Terhapus!",text:"Jadwal berhasil dihapus",timer:2e3,showConfirmButton:!1})},error:n=>{console.error("\u274C Error deleting schedule:",n),this.isLoading.set(!1),this.showSweetAlert({icon:"error",title:"Gagal!",text:n.message||"Gagal menghapus jadwal",confirmButtonColor:"#3b6fad"})}}))}updateStatus(t,e){this.scheduleService.updateScheduleStatus(t,e).subscribe({next:a=>{this.schedules.update(n=>n.map(c=>c._id===t?a:c)),this.showSweetAlert({icon:"success",title:"Berhasil!",text:"Status berhasil diupdate",timer:2e3,showConfirmButton:!1})},error:a=>{console.error("\u274C Error updating status:",a),this.showSweetAlert({icon:"error",title:"Gagal!",text:a.message||"Gagal mengupdate status",confirmButtonColor:"#3b6fad"})}})}toggleReminder(t){if(!t._id)return;let e=!t.reminderEnabled;this.scheduleService.toggleReminder(t._id,e).subscribe({next:a=>{this.schedules.update(n=>n.map(c=>c._id===t._id?a:c)),this.showSweetAlert({icon:"success",title:"Berhasil!",text:`Pengingat WhatsApp ${e?"diaktifkan":"dinonaktifkan"}`,timer:2e3,showConfirmButton:!1})},error:a=>{console.error("\u274C Error toggling reminder:",a),this.showSweetAlert({icon:"error",title:"Gagal!",text:a.message||"Gagal mengubah status pengingat",confirmButtonColor:"#3b6fad"})}})}async sendWhatsAppReminder(t){if((await this.showSweetAlert({title:"Kirim Pengingat?",text:"Kirim pengingat via WhatsApp sekarang?",icon:"question",showCancelButton:!0,confirmButtonColor:"#4caf50",cancelButtonColor:"#999",confirmButtonText:"\u{1F4F1} Kirim Sekarang",cancelButtonText:"Batal"})).isConfirmed){if(this.isBrowser&&typeof A<"u")try{A.fire({title:"Mengirim...",text:"Sedang mengirim pengingat WhatsApp",allowOutsideClick:!1,didOpen:()=>{A.showLoading()}})}catch(a){console.error("Error showing loading Swal:",a)}this.scheduleService.sendWhatsAppReminder(t).subscribe({next:a=>{this.showSweetAlert({icon:"success",title:"Terkirim!",text:a.message,confirmButtonColor:"#3b6fad"})},error:a=>{console.error("\u274C Error sending WhatsApp reminder:",a),this.showSweetAlert({icon:"error",title:"Gagal!",text:a.message||"Gagal mengirim pengingat WhatsApp",confirmButtonColor:"#3b6fad"})}})}}calculateDuration(){if(this.formData.startTime&&this.formData.endTime)try{let[t,e]=this.formData.startTime.split(":").map(Number),[a,n]=this.formData.endTime.split(":").map(Number),c=t*60+e,M=a*60+n;this.formData.duration=M-c}catch(t){console.error("Error calculating duration:",t)}}formatDate(t){try{return new Date(t).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(e){return console.error("Error formatting date:",e),""}}formatTime(t){return t||""}getStatusColor(t){return this.statusOptions.find(a=>a.value===t)?.color||"#999"}getStatusLabel(t){return this.statusOptions.find(a=>a.value===t)?.label||t}switchViewMode(t){this.viewMode.set(t)}getMonthName(){try{return this.currentMonth().toLocaleDateString("id-ID",{month:"long",year:"numeric"})}catch(t){return console.error("Error getting month name:",t),""}}getSchedulesForDate(t){try{return this.filteredSchedules().filter(e=>!e||!e.date?!1:new Date(e.date).toDateString()===t.toDateString())}catch(e){return console.error("Error getting schedules for date:",e),[]}}static \u0275fac=function(e){return new(e||l)(I(N),I(Ce),I(pe),I(ne),I(K))};static \u0275cmp=Y({type:l,selectors:[["app-schedule"]],decls:43,vars:12,consts:[[1,"schedule-page"],[1,"page-header"],[1,"header-left"],[1,"header-right"],[1,"btn","btn-primary"],[1,"filter-section"],[1,"filters"],[1,"filter-group"],[3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"view-toggle"],[1,"toggle-btn",3,"click"],[1,"loading-container"],[1,"calendar-view"],[1,"list-view"],[1,"modal-overlay"],[1,"btn","btn-primary",3,"click"],[1,"spinner"],[1,"calendar-header"],[1,"btn-nav",3,"click"],[1,"month-title"],[1,"btn-today",3,"click"],[1,"calendar-grid"],[1,"day-header"],[1,"calendar-day",3,"other-month","today","has-schedules"],[1,"calendar-day",3,"click"],[1,"day-number"],[1,"day-schedules"],[1,"schedule-item",3,"background"],[1,"schedule-more"],[1,"schedule-item",3,"click"],[1,"schedule-time"],[1,"schedule-title"],[1,"list-header"],[1,"empty-state"],[1,"schedule-list"],[1,"empty-icon"],[1,"schedule-card"],[1,"schedule-card",3,"click"],[1,"card-header"],[1,"date-badge"],[1,"time-badge"],[1,"status-badge"],[1,"card-body"],[1,"info-row"],[1,"label"],[1,"value"],[1,"card-footer"],[1,"reminder-status"],[1,"reminder-enabled"],[1,"reminder-disabled"],[1,"card-actions"],["title","Edit",1,"btn-icon"],["title","Toggle Reminder",1,"btn-icon",3,"click"],["title","Kirim WA",1,"btn-icon",3,"click"],["title","Edit",1,"btn-icon",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"],[1,"view-details"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],[1,"detail-row","full-width"],[1,"modal-actions"],[1,"btn","btn-secondary"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-info",3,"click"],[1,"btn","btn-danger"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"schedule-form"],[1,"form-row"],[1,"form-group"],["name","studentId","required","",3,"ngModelChange","ngModel","disabled"],["name","coachId","required","",3,"ngModelChange","ngModel","disabled"],["name","program","required","",3,"ngModelChange","ngModel","disabled"],["type","text","name","location","placeholder","Kolam Utama","required","",3,"ngModelChange","ngModel","disabled"],["type","date","name","date","required","",3,"ngModelChange","ngModel","disabled"],["type","time","name","startTime","required","",3,"ngModelChange","change","ngModel","disabled"],["type","time","name","endTime","required","",3,"ngModelChange","change","ngModel","disabled"],["type","number","name","duration","readonly","",3,"ngModelChange","ngModel"],["name","status","required","",3,"ngModelChange","ngModel"],[1,"help-text"],[1,"form-group","full-width"],["name","notes","rows","3","placeholder","Catatan tambahan...",3,"ngModelChange","ngModel"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","reminderEnabled",3,"ngModelChange","ngModel","disabled"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),r(4,"\u{1F4C5} Manajemen Jadwal"),o(),i(5,"p"),r(6,"Kelola jadwal latihan siswa dan pelatih"),o()(),i(7,"div",3),_(8,Oe,5,0,"button",4),o()(),i(9,"div",5)(10,"div",6),_(11,ye,8,1,"div",7),i(12,"div",7)(13,"label"),r(14,"Filter Program:"),o(),i(15,"select",8),g("ngModelChange",function(c){return a.filterProgram.set(c)}),i(16,"option",9),r(17,"Semua Program"),o(),v(18,De,2,2,"option",10,R),o()(),i(20,"div",7)(21,"label"),r(22,"Filter Status:"),o(),i(23,"select",8),g("ngModelChange",function(c){return a.filterStatus.set(c)}),i(24,"option",9),r(25,"Semua Status"),o(),v(26,Ee,2,2,"option",10,Me),o()()(),i(28,"div",11)(29,"button",12),g("click",function(){return a.switchViewMode("calendar")}),i(30,"span"),r(31,"\u{1F4C5}"),o(),i(32,"span"),r(33,"Kalender"),o()(),i(34,"button",12),g("click",function(){return a.switchViewMode("list")}),i(35,"span"),r(36,"\u{1F4CB}"),o(),i(37,"span"),r(38,"Daftar"),o()()()(),_(39,ke,4,0,"div",13),_(40,Be,27,1,"div",14),_(41,$e,6,2,"div",15),o(),_(42,dt,12,2,"div",16)),e&2&&(d(8),p(a.isAdmin()?8:-1),d(3),p(a.isAdmin()?11:-1),d(4),C("ngModel",a.filterProgram()),d(3),y(a.programs),d(5),C("ngModel",a.filterStatus()),d(3),y(a.statusOptions),d(3),F("active",a.viewMode()==="calendar"),d(5),F("active",a.viewMode()==="list"),d(5),p(a.isLoading()?39:-1),d(),p(!a.isLoading()&&a.viewMode()==="calendar"?40:-1),d(),p(!a.isLoading()&&a.viewMode()==="list"?41:-1),d(),p(a.showModal()?42:-1))},dependencies:[X,_e,ce,ue,ge,oe,se,ie,me,ae,re,he,de,le],styles:['@charset "UTF-8";.schedule-page[_ngcontent-%COMP%]{padding:2rem;max-width:1600px;margin:0 auto}@media (max-width: 768px){.schedule-page[_ngcontent-%COMP%]{padding:1rem}}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;color:#1a3a52;margin:0 0 .5rem;font-weight:700}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#5a6c7d;margin:0;font-size:1rem}.page-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.875rem 1.5rem;background:linear-gradient(135deg,#3b6fad,#6199c4);color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease}.page-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #3b6fad4d}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{width:100%}.page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{width:100%;justify-content:center}}.filter-section[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:12px;box-shadow:0 2px 10px #0000000d;margin-bottom:2rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.filter-section[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;flex:1}.filter-section[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.filter-section[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#5a6c7d}.filter-section[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem 1rem;border:2px solid #e0e7ee;border-radius:8px;font-size:.95rem;cursor:pointer;transition:all .3s ease}.filter-section[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b6fad}.filter-section[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]{display:flex;gap:.5rem;background:#f0f4f8;padding:.25rem;border-radius:8px}.filter-section[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.625rem 1rem;background:transparent;border:none;border-radius:6px;font-weight:600;color:#5a6c7d;cursor:pointer;transition:all .3s ease}.filter-section[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background:#3b6fad1a}.filter-section[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   .toggle-btn.active[_ngcontent-%COMP%]{background:#fff;color:#3b6fad;box-shadow:0 2px 8px #0000001a}@media (max-width: 968px){.filter-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-section[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{flex-direction:column}.filter-section[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]{width:100%}.filter-section[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{flex:1;justify-content:center}}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:4rem 0}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #f3f3f3;border-top:4px solid #3b6fad;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#5a6c7d;font-size:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.calendar-view[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:12px;box-shadow:0 2px 10px #0000000d}.calendar-view[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;margin-bottom:2rem;flex-wrap:wrap}.calendar-view[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .btn-nav[_ngcontent-%COMP%]{padding:.625rem 1.25rem;background:#fff;border:2px solid #e0e7ee;border-radius:8px;font-weight:600;color:#3b6fad;cursor:pointer;transition:all .3s ease}.calendar-view[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .btn-nav[_ngcontent-%COMP%]:hover{border-color:#3b6fad;background:#f8f9ff}.calendar-view[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .month-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1a3a52;margin:0;min-width:250px;text-align:center}.calendar-view[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .btn-today[_ngcontent-%COMP%]{padding:.625rem 1.25rem;background:linear-gradient(135deg,#3b6fad,#6199c4);border:none;border-radius:8px;font-weight:600;color:#fff;cursor:pointer;transition:all .3s ease}.calendar-view[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .btn-today[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #3b6fad4d}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:1px;background:#e0e7ee;border:1px solid #e0e7ee;border-radius:8px;overflow:hidden}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]{background:#f0f4f8;padding:1rem;text-align:center;font-weight:700;color:#1a3a52;font-size:.9rem}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]{background:#fff;min-height:120px;padding:.75rem;cursor:pointer;transition:all .3s ease;position:relative}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]:hover{background:#f8f9ff}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day.other-month[_ngcontent-%COMP%]{background:#fafbfc;opacity:.6}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day.other-month[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:#999}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day.today[_ngcontent-%COMP%]{background:#fff8e6}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b6fad,#6199c4);color:#fff;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day.has-schedules[_ngcontent-%COMP%]{border-left:3px solid #3b6fad}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{font-weight:700;color:#1a3a52;margin-bottom:.5rem;font-size:.95rem}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .day-schedules[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .day-schedules[_ngcontent-%COMP%]   .schedule-item[_ngcontent-%COMP%]{padding:.375rem .5rem;border-radius:4px;font-size:.8rem;color:#fff;display:flex;align-items:center;gap:.25rem;cursor:pointer;transition:all .2s ease}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .day-schedules[_ngcontent-%COMP%]   .schedule-item[_ngcontent-%COMP%]:hover{opacity:.8;transform:translate(2px)}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .day-schedules[_ngcontent-%COMP%]   .schedule-item[_ngcontent-%COMP%]   .schedule-time[_ngcontent-%COMP%]{font-weight:700}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .day-schedules[_ngcontent-%COMP%]   .schedule-item[_ngcontent-%COMP%]   .schedule-title[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .day-schedules[_ngcontent-%COMP%]   .schedule-more[_ngcontent-%COMP%]{font-size:.75rem;color:#5a6c7d;text-align:center;padding:.25rem;font-weight:600}@media (max-width: 768px){.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]{min-height:80px;padding:.5rem}.calendar-view[_ngcontent-%COMP%]   .calendar-grid[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]{padding:.5rem;font-size:.8rem}}.list-view[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.list-view[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;color:#1a3a52;margin:0;font-weight:700}.list-view[_ngcontent-%COMP%]   .schedule-list[_ngcontent-%COMP%]{display:grid;gap:1rem}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:12px;box-shadow:0 2px 10px #0000000d;cursor:pointer;transition:all .3s ease}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 20px #0000001a}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:1rem;border-bottom:2px solid #f0f4f8;flex-wrap:wrap;gap:.5rem}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center;flex-wrap:wrap}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-badge[_ngcontent-%COMP%]{background:#f0f4f8;padding:.375rem .875rem;border-radius:6px;font-size:.85rem;font-weight:600;color:#1a3a52}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .time-badge[_ngcontent-%COMP%]{background:#e8f4f8;padding:.375rem .875rem;border-radius:6px;font-size:.85rem;font-weight:600;color:#3b6fad}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.375rem .875rem;border-radius:6px;font-size:.85rem;font-weight:700;color:#fff}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:grid;gap:.75rem;margin-bottom:1rem}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;gap:.5rem}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#5a6c7d;min-width:100px}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#1a3a52;font-weight:500}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:1rem;border-top:2px solid #f0f4f8;flex-wrap:wrap;gap:.5rem}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .reminder-status[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .reminder-status[_ngcontent-%COMP%]   .reminder-enabled[_ngcontent-%COMP%]{color:#4caf50}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .reminder-status[_ngcontent-%COMP%]   .reminder-disabled[_ngcontent-%COMP%]{color:#999}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:36px;height:36px;background:#f0f4f8;border:none;border-radius:8px;font-size:1.2rem;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.list-view[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{background:#3b6fad;transform:scale(1.1)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000000d}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:1rem;display:block}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:#1a3a52;margin:0 0 .5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#5a6c7d;font-size:1rem;margin:0}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:1000;padding:2rem;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:0;align-items:flex-end}}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;max-width:800px;width:100%;max-height:90vh;overflow-y:auto;animation:_ngcontent-%COMP%_slideUp .4s cubic-bezier(.68,-.55,.265,1.55)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{border-radius:16px 16px 0 0;max-height:95vh}}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;border-bottom:2px solid #f0f4f8}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#1a3a52;margin:0;font-weight:700}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{width:40px;height:40px;background:#f0f4f8;border:none;border-radius:8px;font-size:1.5rem;color:#5a6c7d;cursor:pointer;transition:all .3s ease}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#f44336;color:#fff;transform:rotate(90deg)}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:2rem}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:1.5rem}}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;flex-wrap:wrap;margin-top:1.5rem}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b6fad,#6199c4);color:#fff}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #3b6fad4d}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#f0f4f8;color:#5a6c7d}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e0e7ee}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf50,#45a049);color:#fff}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #4caf504d}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn.btn-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#25d366,#128c7e);color:#fff}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn.btn-info[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #25d3664d}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f44336,#d32f2f);color:#fff}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn.btn-danger[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #f443364d}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{flex-direction:column}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}.view-details[_ngcontent-%COMP%]{display:grid;gap:1rem}.view-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:150px 1fr;gap:1rem;padding:.75rem 0;border-bottom:1px solid #f0f4f8}.view-details[_ngcontent-%COMP%]   .detail-row.full-width[_ngcontent-%COMP%]{grid-template-columns:1fr}.view-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-weight:700;color:#5a6c7d}.view-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{color:#1a3a52;font-weight:500}@media (max-width: 640px){.view-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem}}.schedule-form[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.schedule-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled, .schedule-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled, .schedule-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;color:#999;cursor:not-allowed;opacity:.7}.schedule-form[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-size:.75rem;color:#666}.schedule-form[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]:has(\\2705 ){color:#4caf50}.schedule-form[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]:has(\\26a0\\fe0f ){color:#ff9800}.schedule-form[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]:has(input:disabled){opacity:.6;cursor:not-allowed}.schedule-form[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]:has(input:disabled)   input[_ngcontent-%COMP%]{cursor:not-allowed}.schedule-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.schedule-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.schedule-form[_ngcontent-%COMP%]   .form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.schedule-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#1a3a52;font-size:.95rem}.schedule-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .schedule-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .schedule-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.75rem 1rem;border:2px solid #e0e7ee;border-radius:8px;font-size:1rem;transition:all .3s ease}.schedule-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .schedule-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .schedule-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b6fad;box-shadow:0 0 0 3px #3b6fad1a}.schedule-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;font-family:inherit}.schedule-form[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;cursor:pointer}.schedule-form[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer}.schedule-form[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#1a3a52}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#3b6fad;border-radius:4px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#2d5a8c}@media (max-width: 640px){.schedule-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})};export{fe as ScheduleComponent};
