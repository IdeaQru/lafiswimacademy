import './polyfills.server.mjs';
import{a as X}from"./chunk-3N5WCD2O.mjs";import"./chunk-ZQZ65V2P.mjs";import{c as U,g as B,j as W,u as R}from"./chunk-GF72ANAT.mjs";import{a as w}from"./chunk-2MWTOOCD.mjs";import{Ab as h,Bb as b,Bd as j,E as x,Eb as Y,Fb as G,Gb as g,Hb as o,Ib as e,Jb as S,Mc as A,P as v,Qb as O,Sb as p,Ub as d,Xa as r,ab as V,ca as _,da as u,dc as Q,ec as P,f as L,gb as y,gc as a,hc as l,ic as f,jc as k,lc as F,ld as K,mb as D,mc as z,md as J,nc as N,nd as H,pd as mt,qb as C,ra as $,sd as I,uc as lt,vc as gt,xd as pt,yb as dt,za as st}from"./chunk-37477ZKR.mjs";import{a as ct}from"./chunk-N7QBYMCK.mjs";function ht(c,n){if(c&1){let t=O();o(0,"button",10),p("click",function(){_(t);let s=d();return u(s.clearSearch())}),a(1," \u2715 "),e()}}function bt(c,n){if(c&1&&(o(0,"small"),a(1),e()),c&2){let t=d(2);r(),f("\u26A1 Loaded in ",t.loadDuration)}}function Pt(c,n){if(c&1&&(o(0,"div",11)(1,"span"),a(2,"Menampilkan "),o(3,"strong"),a(4),e(),a(5," dari "),o(6,"strong"),a(7),e(),a(8," siswa"),e(),C(9,bt,2,1,"small",12),e()),c&2){let t=d();r(4),l(t.filteredStudents.length),r(3),l(t.students.length),r(2),g("ngIf",t.loadDuration)}}function Mt(c,n){c&1&&(o(0,"div",13),S(1,"div",14),o(2,"p"),a(3,"Memuat daftar siswa..."),e()())}function Ot(c,n){if(c&1){let t=O();o(0,"tr")(1,"td"),a(2),e(),o(3,"td")(4,"strong"),a(5),e()(),o(6,"td"),a(7),e(),o(8,"td")(9,"span",19),a(10),e()(),o(11,"td",20),a(12),e(),o(13,"td",21),a(14),e(),o(15,"td",22),a(16),e(),o(17,"td",20)(18,"div",23),S(19,"div",24),o(20,"span",25),a(21),e()()(),o(22,"td")(23,"div",26)(24,"button",27),p("click",function(){let s=_(t).$implicit,m=d(2);return u(m.viewDetail(s))}),a(25," \u{1F441}\uFE0F Detail "),e(),o(26,"button",28),p("click",function(){let s=_(t).$implicit,m=d(2);return u(m.exportPDF(s._id))}),a(27," \u{1F4C4} PDF "),e()()()()}if(c&2){let t=n.$implicit,i=n.index,s=d(2);r(2),l(i+1),r(3),l(t.studentId),r(2),l(t.fullName),r(2),g("ngClass",s.getStatusBadgeClass(t.status)),r(),f(" ",t.status," "),r(2),l(s.formatNumber(t.totalSessions)),r(2),l(s.formatNumber(t.hadir)),r(2),l(s.formatNumber(t.tidakHadir)),r(3),Q("width",t.attendanceRate,"%"),r(2),f("",t.attendanceRate,"%"),r(5),g("disabled",s.isExporting)}}function xt(c,n){if(c&1&&(o(0,"div",15)(1,"div",16)(2,"table",17)(3,"thead")(4,"tr")(5,"th"),a(6,"No"),e(),o(7,"th"),a(8,"ID Siswa"),e(),o(9,"th"),a(10,"Nama Lengkap"),e(),o(11,"th"),a(12,"Status"),e(),o(13,"th"),a(14,"Total Sesi"),e(),o(15,"th"),a(16,"Hadir"),e(),o(17,"th"),a(18,"Tidak Hadir"),e(),o(19,"th"),a(20,"Tingkat Kehadiran"),e(),o(21,"th"),a(22,"Aksi"),e()()(),o(23,"tbody"),C(24,Ot,28,12,"tr",18),e()()()()),c&2){let t=d();r(24),g("ngForOf",t.filteredStudents)}}function vt(c,n){if(c&1&&(o(0,"p"),a(1),e()),c&2){let t=d(2);r(),f('Tidak ditemukan siswa dengan kata kunci "',t.searchQuery,'"')}}function yt(c,n){c&1&&(o(0,"p"),a(1,"Belum ada data siswa dalam periode ini"),e())}function St(c,n){if(c&1){let t=O();o(0,"button",32),p("click",function(){_(t);let s=d(2);return u(s.clearSearch())}),a(1," Tampilkan Semua "),e()}}function wt(c,n){if(c&1&&(o(0,"div",29)(1,"div",30),a(2,"\u{1F464}"),e(),o(3,"h3"),a(4,"Tidak Ada Data"),e(),C(5,vt,2,1,"p",12)(6,yt,2,0,"p",12)(7,St,2,0,"button",31),e()),c&2){let t=d();r(5),g("ngIf",t.searchQuery),r(),g("ngIf",!t.searchQuery),r(),g("ngIf",t.searchQuery)}}function Et(c,n){c&1&&(o(0,"div",55),S(1,"div",56),o(2,"p"),a(3,"Memuat riwayat latihan..."),e()())}function Dt(c,n){if(c&1&&(o(0,"div",74)(1,"span",71),a(2,"Catatan:"),e(),o(3,"span",75),a(4),e()()),c&2){let t=d().$implicit;r(4),l(t.notes)}}function kt(c,n){if(c&1&&(o(0,"div",61)(1,"div",62),a(2),e(),o(3,"div",63)(4,"div",64)(5,"div",65)(6,"span",66),a(7),e(),o(8,"span",67),a(9),e()(),o(10,"span",68),a(11),e()(),o(12,"div",69)(13,"div",70)(14,"span",71),a(15,"Program:"),e(),o(16,"span",72),a(17),e()(),o(18,"div",70)(19,"span",71),a(20,"Lokasi:"),e(),o(21,"span",72),a(22),e()(),o(23,"div",70)(24,"span",71),a(25,"Pelatih:"),e(),o(26,"span",72),a(27),e()(),C(28,Dt,5,1,"div",73),e()()()),c&2){let t=n.$implicit,i=n.index,s=d(4);r(2),l(i+1),r(5),l(s.formatDate(t.date)),r(2),l(t.time),r(),g("ngClass",s.getAttendanceBadgeClass(t.attendance)),r(),f(" ",t.attendance," "),r(6),l(t.program),r(5),l(t.location),r(5),k("",t.coachName," (",t.coachSpecialization,")"),r(),g("ngIf",t.notes&&t.notes!=="-")}}function It(c,n){c&1&&(o(0,"div",76)(1,"p"),a(2,"\u{1F4DD} Belum ada riwayat latihan dalam periode ini"),e()())}function Rt(c,n){if(c&1&&(o(0,"div",57)(1,"h3"),a(2,"\u{1F4CB} Riwayat Latihan"),e(),o(3,"div",58),C(4,kt,29,10,"div",59)(5,It,3,0,"div",60),e()()),c&2){let t=d(3);r(4),g("ngForOf",t.studentDetail.history),r(),g("ngIf",t.studentDetail.history.length===0)}}function Tt(c,n){if(c&1&&(o(0,"div",40)(1,"div",41)(2,"div",42)(3,"div",43)(4,"span",44),a(5,"Nama:"),e(),o(6,"span",45)(7,"strong"),a(8),e()()(),o(9,"div",43)(10,"span",44),a(11,"ID:"),e(),o(12,"span",45),a(13),e()(),o(14,"div",43)(15,"span",44),a(16,"Status:"),e(),o(17,"span",19),a(18),e()()()(),o(19,"div",46)(20,"div",47)(21,"span",48),a(22,"\u{1F4CA}"),e(),o(23,"div",49)(24,"strong"),a(25),e(),o(26,"small"),a(27,"Total Sesi"),e()()(),o(28,"div",50)(29,"span",48),a(30,"\u2705"),e(),o(31,"div",49)(32,"strong"),a(33),e(),o(34,"small"),a(35,"Hadir"),e()()(),o(36,"div",51)(37,"span",48),a(38,"\u274C"),e(),o(39,"div",49)(40,"strong"),a(41),e(),o(42,"small"),a(43,"Tidak Hadir"),e()()(),o(44,"div",52)(45,"span",48),a(46,"\u{1F4C8}"),e(),o(47,"div",49)(48,"strong"),a(49),e(),o(50,"small"),a(51,"Kehadiran"),e()()()(),C(52,Et,4,0,"div",53)(53,Rt,6,2,"div",54),e()),c&2){let t=d(2);r(8),l(t.selectedStudent.fullName),r(5),l(t.selectedStudent.studentId),r(4),g("ngClass",t.getStatusBadgeClass(t.selectedStudent.status)),r(),f(" ",t.selectedStudent.status," "),r(7),l(t.selectedStudent.totalSessions),r(8),l(t.selectedStudent.hadir),r(8),l(t.selectedStudent.tidakHadir),r(8),f("",t.selectedStudent.attendanceRate,"%"),r(3),g("ngIf",t.isLoadingDetail),r(),g("ngIf",!t.isLoadingDetail&&t.studentDetail)}}function Ft(c,n){if(c&1){let t=O();o(0,"div",33),p("click",function(){_(t);let s=d();return u(s.closeDetail())}),o(1,"div",34),p("click",function(s){return _(t),u(s.stopPropagation())}),o(2,"div",35)(3,"h2"),a(4,"\u{1F4CB} Detail Riwayat Latihan"),e(),o(5,"button",36),p("click",function(){_(t);let s=d();return u(s.closeDetail())}),a(6,"\u2715"),e()(),C(7,Tt,54,10,"div",37),o(8,"div",38)(9,"button",32),p("click",function(){_(t);let s=d();return u(s.closeDetail())}),a(10," Tutup "),e(),o(11,"button",39),p("click",function(){_(t);let s=d();return u(s.exportPDF(s.selectedStudent._id))}),a(12," \u{1F4C4} Export PDF "),e()()()()}if(c&2){let t=d();r(7),g("ngIf",t.selectedStudent),r(4),g("disabled",t.isExporting)}}var Z=class c{constructor(n,t){this.http=n;this.cdr=t}dateRange;toast=new V;isLoading=!1;isLoadingDetail=!1;isExporting=!1;students=[];filteredStudents=[];searchQuery="";selectedStudent=null;studentDetail=null;showDetailModal=!1;loadDuration="";destroy$=new L;ngOnInit(){console.log("\u{1F465} Student Report Component initialized"),this.loadStudentList()}ngOnChanges(n){n.dateRange&&!n.dateRange.firstChange&&this.loadStudentList()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadStudentList(){let n=performance.now();this.isLoading=!0;let t={startDate:this.dateRange.startDate,endDate:this.dateRange.endDate};this.http.get(`${w.apiUrl}/reports/students/list`,{params:t}).pipe(v(this.destroy$),x(()=>{this.isLoading=!1;let i=performance.now()-n;this.loadDuration=`${Math.round(i)}ms`,this.cdr.detectChanges()})).subscribe({next:i=>{console.log("Student list:",i),this.students=i.data||[],this.filteredStudents=[...this.students]},error:i=>{console.error("Error loading student list:",i),this.toast.emit({message:"Gagal memuat daftar siswa",type:"error"})}})}onSearchInput(){let n=this.searchQuery.toLowerCase().trim();if(!n){this.filteredStudents=[...this.students];return}this.filteredStudents=this.students.filter(t=>t.fullName.toLowerCase().includes(n)||t.studentId.toLowerCase().includes(n))}clearSearch(){this.searchQuery="",this.filteredStudents=[...this.students]}viewDetail(n){this.selectedStudent=n,this.loadStudentDetail(n._id),this.showDetailModal=!0}loadStudentDetail(n){this.isLoadingDetail=!0;let t={startDate:this.dateRange.startDate,endDate:this.dateRange.endDate};this.http.get(`${w.apiUrl}/reports/student/${n}`,{params:t}).pipe(v(this.destroy$),x(()=>{this.isLoadingDetail=!1,this.cdr.detectChanges()})).subscribe({next:i=>{console.log("Student detail:",i),this.studentDetail=i.data},error:i=>{console.error("Error loading student detail:",i),this.toast.emit({message:"Gagal memuat detail siswa",type:"error"})}})}closeDetail(){this.showDetailModal=!1,this.selectedStudent=null,this.studentDetail=null}exportPDF(n){if(this.isExporting)return;this.isExporting=!0,this.toast.emit({message:"Mengekspor laporan ke PDF...",type:"info"});let t={startDate:this.dateRange.startDate,endDate:this.dateRange.endDate,format:"pdf",reportType:"student-individual",studentId:n};this.http.get(`${w.apiUrl}/reports/export`,{params:t,responseType:"blob"}).pipe(v(this.destroy$),x(()=>{this.isExporting=!1,this.cdr.detectChanges()})).subscribe({next:i=>{let s=this.students.find(m=>m._id===n);this.downloadFile(i,`laporan-siswa-${s?.studentId}-${Date.now()}.pdf`),this.toast.emit({message:"Laporan PDF berhasil diunduh!",type:"success"})},error:()=>{this.toast.emit({message:"Gagal mengekspor PDF",type:"error"})}})}downloadFile(n,t){let i=window.URL.createObjectURL(n),s=document.createElement("a");s.href=i,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i)}formatDate(n){return new Date(n).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})}formatNumber(n){return n.toString()}getAttendanceBadgeClass(n){switch(n){case"Hadir":return"badge-success";case"Tidak Hadir":return"badge-danger";case"Izin":return"badge-warning";case"Sakit":return"badge-info";default:return""}}getStatusBadgeClass(n){switch(n){case"Aktif":return"badge-success";case"Non-Aktif":return"badge-danger";case"Cuti":return"badge-warning";default:return""}}static \u0275fac=function(t){return new(t||c)(y(j),y(A))};static \u0275cmp=D({type:c,selectors:[["app-student-report"]],inputs:{dateRange:"dateRange"},outputs:{toast:"toast"},features:[$],decls:10,vars:8,consts:[[1,"student-report-container"],[1,"search-bar"],[1,"search-input-wrapper"],["type","text","placeholder","\u{1F50D} Cari siswa berdasarkan nama, ID...",1,"search-input",3,"ngModelChange","input","ngModel","disabled"],["class","clear-btn",3,"click",4,"ngIf"],["class","search-info",4,"ngIf"],["class","loading-overlay",4,"ngIf"],["class","table-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"clear-btn",3,"click"],[1,"search-info"],[4,"ngIf"],[1,"loading-overlay"],[1,"spinner"],[1,"table-container"],[1,"table-wrapper"],[1,"student-table"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"text-center"],[1,"text-center","text-success"],[1,"text-center","text-danger"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"action-buttons"],[1,"btn-small","btn-info",3,"click"],[1,"btn-small","btn-primary",3,"click","disabled"],[1,"empty-state"],[1,"empty-icon"],["class","btn-secondary",3,"click",4,"ngIf"],[1,"btn-secondary",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-container","detail-modal",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"btn-primary",3,"click","disabled"],[1,"modal-body"],[1,"student-info-card"],[1,"info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"stats-mini-grid"],[1,"stat-mini-card"],[1,"stat-mini-icon"],[1,"stat-mini-info"],[1,"stat-mini-card","success"],[1,"stat-mini-card","danger"],[1,"stat-mini-card","info"],["class","loading-detail",4,"ngIf"],["class","history-section",4,"ngIf"],[1,"loading-detail"],[1,"spinner-small"],[1,"history-section"],[1,"history-list"],["class","history-item",4,"ngFor","ngForOf"],["class","empty-history",4,"ngIf"],[1,"history-item"],[1,"history-number"],[1,"history-content"],[1,"history-header"],[1,"history-date"],[1,"date-label"],[1,"time-label"],[1,"attendance-badge",3,"ngClass"],[1,"history-details"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],["class","detail-row notes",4,"ngIf"],[1,"detail-row","notes"],[1,"detail-value","notes-text"],[1,"empty-history"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),N("ngModelChange",function(m){return z(i.searchQuery,m)||(i.searchQuery=m),m}),p("input",function(){return i.onSearchInput()}),e(),C(4,ht,2,0,"button",4),e(),C(5,Pt,10,3,"div",5),e(),C(6,Mt,4,0,"div",6)(7,xt,25,1,"div",7)(8,wt,8,3,"div",8),e(),C(9,Ft,13,2,"div",9)),t&2&&(r(3),F("ngModel",i.searchQuery),g("disabled",i.isLoading),r(),g("ngIf",i.searchQuery),r(),g("ngIf",!i.isLoading),r(),g("ngIf",i.isLoading),r(),g("ngIf",!i.isLoading&&i.filteredStudents.length>0),r(),g("ngIf",!i.isLoading&&i.filteredStudents.length===0),r(),g("ngIf",i.showDetailModal))},dependencies:[I,K,J,H,R,U,B,W],styles:[".student-report-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.search-bar[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:1rem 3rem 1rem 1rem;border:2px solid #e2e8f0;border-radius:12px;font-size:1rem;transition:all .2s ease}.search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0ea5e9;box-shadow:0 0 0 3px #0ea5e91a}.search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:disabled{background:#f8fafc;cursor:not-allowed}.search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#64748b;font-size:1.2rem;cursor:pointer;padding:.25rem;transition:all .2s ease}.search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]:hover{color:#ef4444}.search-bar[_ngcontent-%COMP%]   .search-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.875rem;color:#64748b}.search-bar[_ngcontent-%COMP%]   .search-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0ea5e9;font-weight:600}.search-bar[_ngcontent-%COMP%]   .search-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#10b981;font-weight:600}.loading-overlay[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;gap:1rem}.loading-overlay[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #e2e8f0;border-top-color:#0ea5e9;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:.95rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center;background:#fff;border-radius:12px;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.5rem;font-weight:700;color:#1e293b}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem;color:#64748b}.empty-state[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#f8fafc;color:#1e293b;border:2px solid #e2e8f0;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s ease}.empty-state[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#edf2f7;border-color:#0ea5e9}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f8fafc}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#e2e8f0;border-radius:4px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#64748b}.student-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.875rem}.student-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0ea5e9,#0b83b9);position:sticky;top:0;z-index:10}.student-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem;text-align:left;font-weight:600;color:#fff;white-space:nowrap;border-bottom:2px solid rgb(9.6639676113,113.8967611336,160.8360323887)}.student-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-top-left-radius:12px}.student-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-top-right-radius:12px}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0;transition:all .2s ease}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#0ea5e908}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;color:#1e293b}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.text-center[_ngcontent-%COMP%]{text-align:center}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.text-success[_ngcontent-%COMP%]{color:#10b981;font-weight:600}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.text-danger[_ngcontent-%COMP%]{color:#ef4444;font-weight:600}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:6px;font-size:.75rem;font-weight:600;white-space:nowrap}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge.badge-level[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge.badge-success[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge.badge-danger[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge.badge-warning[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{position:relative;width:100%;max-width:120px;height:24px;background:#f8fafc;border-radius:12px;overflow:hidden;margin:0 auto}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#10b981,#14e8a2);transition:width .5s ease;border-radius:12px}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:.75rem;font-weight:700;color:#1e293b;z-index:1}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-small[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.75rem;border-radius:6px;font-weight:600;cursor:pointer;transition:all .2s ease;border:none;white-space:nowrap}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-small.btn-info[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-small.btn-info[_ngcontent-%COMP%]:hover{background:#0b63f3}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-small.btn-primary[_ngcontent-%COMP%]{background:#0ea5e9;color:#fff}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-small.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0b83b9}.student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-small.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem;animation:_ngcontent-%COMP%_fadeIn .2s ease}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;max-width:900px;width:100%;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;animation:_ngcontent-%COMP%_slideUp .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:2px solid #e2e8f0;display:flex;justify-content:space-between;align-items:center}.modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:700;color:#1e293b}.modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#64748b;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:8px;transition:all .2s ease}.modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#f8fafc;color:#1e293b}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:1.5rem;overflow-y:auto;flex:1}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0ea5e91a,#0ea5e90d);border-radius:8px;padding:1.5rem;margin-bottom:1.5rem;border:2px solid rgba(14,165,233,.2)}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;font-weight:500}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .student-info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:.95rem;color:#1e293b}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .stats-mini-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:1rem;margin-bottom:1.5rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .stats-mini-grid[_ngcontent-%COMP%]   .stat-mini-card[_ngcontent-%COMP%]{background:#f8fafc;border-radius:8px;padding:1rem;display:flex;align-items:center;gap:.75rem;border:2px solid transparent;transition:all .2s ease}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .stats-mini-grid[_ngcontent-%COMP%]   .stat-mini-card[_ngcontent-%COMP%]:hover{border-color:#0ea5e9}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .stats-mini-grid[_ngcontent-%COMP%]   .stat-mini-card[_ngcontent-%COMP%]   .stat-mini-icon[_ngcontent-%COMP%]{font-size:1.5rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .stats-mini-grid[_ngcontent-%COMP%]   .stat-mini-card[_ngcontent-%COMP%]   .stat-mini-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .stats-mini-grid[_ngcontent-%COMP%]   .stat-mini-card[_ngcontent-%COMP%]   .stat-mini-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.25rem;color:#1e293b}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .stats-mini-grid[_ngcontent-%COMP%]   .stat-mini-card[_ngcontent-%COMP%]   .stat-mini-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .stats-mini-grid[_ngcontent-%COMP%]   .stat-mini-card.success[_ngcontent-%COMP%]{background:#10b9810d;border-color:#10b98133}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .stats-mini-grid[_ngcontent-%COMP%]   .stat-mini-card.success[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#10b981}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .stats-mini-grid[_ngcontent-%COMP%]   .stat-mini-card.danger[_ngcontent-%COMP%]{background:#ef44440d;border-color:#ef444433}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .stats-mini-grid[_ngcontent-%COMP%]   .stat-mini-card.danger[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#ef4444}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .stats-mini-grid[_ngcontent-%COMP%]   .stat-mini-card.info[_ngcontent-%COMP%]{background:#3b82f60d;border-color:#3b82f633}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .stats-mini-grid[_ngcontent-%COMP%]   .stat-mini-card.info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#3b82f6}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .loading-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;gap:1rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .loading-detail[_ngcontent-%COMP%]   .spinner-small[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid #e2e8f0;border-top-color:#0ea5e9;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .loading-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.1rem;font-weight:700;color:#1e293b;padding-bottom:.75rem;border-bottom:2px solid #e2e8f0}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem;background:#f8fafc;border-radius:8px;border:2px solid transparent;transition:all .2s ease}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]:hover{border-color:#0ea5e9}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-number[_ngcontent-%COMP%]{width:32px;height:32px;background:#0ea5e9;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.875rem;flex-shrink:0}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]{flex:1}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   .history-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem;gap:1rem;flex-wrap:wrap}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   .history-header[_ngcontent-%COMP%]   .history-date[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   .history-header[_ngcontent-%COMP%]   .history-date[_ngcontent-%COMP%]   .date-label[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:#1e293b}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   .history-header[_ngcontent-%COMP%]   .history-date[_ngcontent-%COMP%]   .time-label[_ngcontent-%COMP%]{font-size:.8rem;color:#64748b}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   .history-header[_ngcontent-%COMP%]   .attendance-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:8px;font-size:.8rem;font-weight:600}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   .history-header[_ngcontent-%COMP%]   .attendance-badge.badge-success[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   .history-header[_ngcontent-%COMP%]   .attendance-badge.badge-danger[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   .history-header[_ngcontent-%COMP%]   .attendance-badge.badge-warning[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   .history-header[_ngcontent-%COMP%]   .attendance-badge.badge-info[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   .history-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   .history-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;font-size:.875rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   .history-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-weight:600;color:#64748b;min-width:80px}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   .history-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{color:#1e293b;flex:1}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   .history-details[_ngcontent-%COMP%]   .detail-row.notes[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{background:#fff;padding:.75rem;border-radius:6px;border-left:3px solid #0ea5e9;font-style:italic}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .history-section[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]   .empty-history[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:#64748b;font-size:.95rem}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:2px solid #e2e8f0;display:flex;justify-content:flex-end;gap:1rem}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%], .modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s ease;border:none}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#f8fafc;color:#1e293b}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#e6edf4}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#0ea5e9;color:#fff}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0b83b9}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.student-table[_ngcontent-%COMP%]{font-size:.75rem}.student-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .student-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}.student-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:column}.student-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-small[_ngcontent-%COMP%]{width:100%}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{flex-direction:column}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};var Nt=(c,n)=>n.coachId,Lt=(c,n)=>n.scheduleId,$t=(c,n)=>n.studentId,Vt=(c,n)=>n._id;function At(c,n){c&1&&(o(0,"div",1),S(1,"div",5),o(2,"p"),a(3,"Memuat laporan pelatih..."),e()())}function Ht(c,n){c&1&&(o(0,"div",2)(1,"div",6),a(2,"\u{1F3CA}\u200D\u2642\uFE0F"),e(),o(3,"h3"),a(4,"Tidak Ada Data"),e(),o(5,"p"),a(6,"Tidak ada data laporan pelatih untuk periode yang dipilih"),e()())}function jt(c,n){c&1&&(S(0,"span",18),o(1,"span"),a(2,"Mengekspor..."),e())}function Ut(c,n){c&1&&(o(0,"span"),a(1,"\u{1F4C4}"),e(),o(2,"span"),a(3,"Export PDF"),e())}function Bt(c,n){c&1&&(S(0,"span",18),o(1,"span"),a(2,"Mengekspor..."),e())}function Wt(c,n){c&1&&(o(0,"span"),a(1,"\u{1F4CA}"),e(),o(2,"span"),a(3,"Export Excel"),e())}function qt(c,n){if(c&1&&(o(0,"div",44),a(1),e()),c&2){let t=d().$implicit;r(),l(t.groupName)}}function Yt(c,n){if(c&1&&(o(0,"div",46)(1,"span",50),a(2,"\u2705"),e(),o(3,"span",51),a(4),e()()),c&2){let t=d().$implicit,i=d(4);r(4),k("",i.getEvaluationCount(t),"/",t.students.length||0)}}function Gt(c,n){c&1&&(o(0,"div",47)(1,"span",50),a(2,"\u23F3"),e(),o(3,"span",51),a(4,"-"),e()())}function Qt(c,n){c&1&&(o(0,"span"),a(1,"\u270F\uFE0F Edit"),e())}function Kt(c,n){c&1&&(o(0,"span"),a(1,"\u{1F4DD} Input"),e())}function Jt(c,n){if(c&1&&(o(0,"span",56),a(1),e()),c&2){let t=d(2).$implicit,i=d(4);r(),f(" ",i.getSessionIcon(t.scheduleType)," Private 1:1 ")}}function Xt(c,n){if(c&1&&(o(0,"span",57),a(1),e()),c&2){let t=d(2).$implicit,i=d(4);r(),f(" ",i.getSessionIcon(t.scheduleType)," Semi Private ")}}function Zt(c,n){if(c&1&&(o(0,"span",58),a(1),e()),c&2){let t=d(2).$implicit,i=d(4);r(),f(" ",i.getSessionIcon(t.scheduleType)," Group Class ")}}function te(c,n){if(c&1&&(o(0,"div",67)(1,"p",69),a(2),e()()),c&2){let t=d().$implicit;r(2),l(t.notes)}}function ee(c,n){c&1&&(o(0,"div",68)(1,"span"),a(2,"-"),e()())}function ne(c,n){if(c&1&&(o(0,"div",61)(1,"div",62)(2,"div",63)(3,"span",64),a(4),e(),o(5,"span",65),a(6),e()(),o(7,"span",66),a(8),e()(),h(9,te,3,1,"div",67)(10,ee,3,0,"div",68),e()),c&2){let t=n.$implicit,i=n.$index;P("alt",i%2===1),r(4),l(t.studentName),r(2),l(t.studentLevel),r(),P("hadir",t.attendance==="Hadir")("tidak-hadir",t.attendance==="Tidak Hadir")("izin",t.attendance==="Izin")("sakit",t.attendance==="Sakit"),r(),f(" ",t.attendance," "),r(),b(t.notes?9:10)}}function oe(c,n){if(c&1&&(o(0,"tr",52)(1,"td",53)(2,"div",54)(3,"div",55)(4,"strong"),a(5,"\u{1F4CB} Detail Evaluasi"),e(),h(6,Jt,2,1,"span",56),h(7,Xt,2,1,"span",57),h(8,Zt,2,1,"span",58),e(),o(9,"div",59),Y(10,ne,11,14,"div",60,$t),e()()()()),c&2){let t=d().$implicit;P("group-session",t.scheduleType==="group")("semiprivate-session",t.scheduleType==="semiPrivate")("private-session",t.scheduleType==="private"),r(6),b(t.scheduleType==="private"?6:-1),r(),b(t.scheduleType==="semiPrivate"?7:-1),r(),b(t.scheduleType==="group"?8:-1),r(2),G(t.evaluations)}}function ae(c,n){if(c&1){let t=O();o(0,"tr")(1,"td",30),a(2),e(),o(3,"td",31)(4,"span",40),a(5),e()(),o(6,"td",32),a(7),e(),o(8,"td",33),a(9),e(),o(10,"td",34),a(11),e(),o(12,"td",35)(13,"span",41),a(14),e()(),o(15,"td",36)(16,"div",42)(17,"span",43),a(18),e(),h(19,qt,2,1,"div",44),e()(),o(20,"td",37)(21,"span",45),a(22),lt(23,"titlecase"),e()(),o(24,"td",38),h(25,Yt,5,2,"div",46)(26,Gt,5,0,"div",47),e(),o(27,"td",39)(28,"button",48),p("click",function(){let s=_(t).$implicit,m=d(4);return u(m.openEvaluationForm(s))}),h(29,Qt,2,0,"span")(30,Kt,2,0,"span"),e()()(),h(31,oe,12,9,"tr",49)}if(c&2){let t=n.$implicit,i=n.$index,s=d(4);P("group-session",t.scheduleType==="group")("semiprivate-session",t.scheduleType==="semiPrivate")("private-session",t.scheduleType==="private")("completed-session",t.status.toLowerCase()==="completed"),r(2),l(i+1),r(3),l(s.formatDate(t.scheduleDate)),r(2),l(t.scheduleTime),r(2),l(t.location),r(2),l(t.programCategory),r(2),g("ngClass",s.getSessionBadgeClass(t.scheduleType)),r(),k(" ",s.getSessionIcon(t.scheduleType)," ",s.getSessionBadgeLabel(t.scheduleType)," "),r(4),l(s.getStudentCountLabel(t)),r(),b(t.groupName&&s.isGroupOrSemiPrivateSession(t)?19:-1),r(2),P("badge-success",t.status.toLowerCase()==="completed")("badge-warning",t.status.toLowerCase()==="scheduled"||t.status.toLowerCase()==="pending"||t.status.toLowerCase()==="active")("badge-danger",t.status.toLowerCase()==="cancelled"),r(),f(" ",gt(23,30,t.status)," "),r(3),b(s.hasEvaluation(t)?25:26),r(3),g("disabled",!s.canEvaluateSession(t))("title",s.canEvaluateSession(t)?"Buka formulir evaluasi":"Sesi batal tidak bisa dievaluasi"),r(),b(s.hasEvaluation(t)?29:30),r(2),b(s.hasEvaluation(t)?31:-1)}}function ie(c,n){if(c&1&&(o(0,"table",28)(1,"thead")(2,"tr")(3,"th",30),a(4,"No"),e(),o(5,"th",31),a(6,"Tanggal"),e(),o(7,"th",32),a(8,"Waktu"),e(),o(9,"th",33),a(10,"Lokasi"),e(),o(11,"th",34),a(12,"Kategori"),e(),o(13,"th",35),a(14,"Tipe"),e(),o(15,"th",36),a(16,"Siswa"),e(),o(17,"th",37),a(18,"Status"),e(),o(19,"th",38),a(20,"Evaluasi"),e(),o(21,"th",39),a(22,"Aksi"),e()()(),o(23,"tbody"),Y(24,ae,32,32,null,null,Lt),e()()),c&2){let t=d().$implicit;r(24),G(t.sessions)}}function re(c,n){c&1&&(o(0,"div",29)(1,"div",70),a(2,"\u{1F4ED}"),e(),o(3,"p"),a(4,"Tidak ada sesi latihan untuk periode ini"),e()())}function ce(c,n){if(c&1&&(o(0,"div",17)(1,"div",19)(2,"div",20)(3,"h3"),a(4),e(),o(5,"p"),a(6),e()(),o(7,"div",21)(8,"div",22)(9,"span",23),a(10,"Selesai"),e(),o(11,"span",24),a(12),e()(),o(13,"div",25)(14,"span",23),a(15,"Upcoming"),e(),o(16,"span",24),a(17),e()(),o(18,"div",26)(19,"span",23),a(20,"Batal"),e(),o(21,"span",24),a(22),e()()()(),o(23,"div",27),h(24,ie,26,0,"table",28)(25,re,5,0,"div",29),e()()),c&2){let t=n.$implicit;r(4),l(t.coachName),r(2),k("",t.coachId," \u2022 ",t.specialization),r(6),l(t.completedSessions),r(5),l(t.upcomingSessions),r(5),l(t.cancelledSessions),r(2),b(t.sessions&&t.sessions.length>0?24:25)}}function se(c,n){if(c&1){let t=O();o(0,"div",3)(1,"div",7)(2,"div",8)(3,"div",9),a(4,"\u{1F3CA}"),e(),o(5,"div",10)(6,"h3"),a(7),e(),o(8,"p"),a(9,"Total Pelatih"),e()()(),o(10,"div",11)(11,"div",9),a(12,"\u{1F4C5}"),e(),o(13,"div",10)(14,"h3"),a(15),e(),o(16,"p"),a(17,"Total Sesi Latihan"),e()()(),o(18,"div",12)(19,"div",9),a(20,"\u{1F4DD}"),e(),o(21,"div",10)(22,"h3"),a(23),e(),o(24,"p"),a(25,"Total Evaluasi"),e()()()(),o(26,"div",13)(27,"button",14),p("click",function(){_(t);let s=d();return u(s.exportPDF())}),h(28,jt,3,0)(29,Ut,4,0),e(),o(30,"button",15),p("click",function(){_(t);let s=d();return u(s.exportExcel())}),h(31,Bt,3,0)(32,Wt,4,0),e()(),o(33,"div",16),Y(34,ce,26,7,"div",17,Nt),e()()}if(c&2){let t=d();r(7),l(t.formatNumber(t.coachReport.stats.totalCoaches)),r(8),l(t.formatNumber(t.coachReport.stats.totalSessions)),r(8),l(t.formatNumber(t.coachReport.stats.totalEvaluations)),r(4),g("disabled",t.isExporting||t.isLoading),r(),b(t.isExporting?28:29),r(2),g("disabled",t.isExporting||t.isLoading),r(),b(t.isExporting?31:32),r(3),G(t.coachReport.coachReports)}}function de(c,n){if(c&1&&(o(0,"div",78)(1,"span",79),a(2,"Nama Kelas:"),e(),o(3,"span",80),a(4),e()()),c&2){let t=d(2);r(4),l(t.selectedSession.groupName)}}function le(c,n){if(c&1&&(o(0,"div",106)(1,"div",107),a(2,"\u{1F4DA} Catatan Sebelumnya:"),e(),o(3,"div",108),a(4),e()()),c&2){let t=d().$implicit,i=d(2);r(4),f(" ",i.formatPreviousNotes(i.getPreviousNotes(t._id))," ")}}function ge(c,n){if(c&1){let t=O();o(0,"div",90)(1,"div",94)(2,"span",95),a(3),e(),o(4,"div",42)(5,"strong",64),a(6),e(),o(7,"small",96),a(8),e()()(),o(9,"div",97)(10,"div",98)(11,"label",99),a(12,"Kehadiran"),e(),o(13,"div",100)(14,"button",101),p("click",function(){let s=_(t).$implicit,m=d(2);return u(m.evaluationForm[s._id].attendance="Hadir")}),a(15," \u2713 Hadir "),e(),o(16,"button",102),p("click",function(){let s=_(t).$implicit,m=d(2);return u(m.evaluationForm[s._id].attendance="Tidak Hadir")}),a(17," \u2715 Tidak Hadir "),e(),o(18,"button",103),p("click",function(){let s=_(t).$implicit,m=d(2);return u(m.evaluationForm[s._id].attendance="Izin")}),a(19," \u{1F4DD} Izin "),e(),o(20,"button",104),p("click",function(){let s=_(t).$implicit,m=d(2);return u(m.evaluationForm[s._id].attendance="Sakit")}),a(21," \u{1F912} Sakit "),e()()(),o(22,"div",98)(23,"label",99),a(24,"Catatan Latihan"),e(),o(25,"textarea",105),N("ngModelChange",function(s){let m=_(t).$implicit,E=d(2);return z(E.evaluationForm[m._id].notes,s)||(E.evaluationForm[m._id].notes=s),u(s)}),a(26,"              "),e()(),h(27,le,5,1,"div",106),e()()}if(c&2){let t=n.$implicit,i=n.$index,s=d(2);r(3),l(i+1),r(3),l(t.fullName),r(2),k("",t.studentId," \u2022 ",t.classLevel),r(6),P("active",(s.evaluationForm[t._id]==null?null:s.evaluationForm[t._id].attendance)==="Hadir"),r(2),P("active",(s.evaluationForm[t._id]==null?null:s.evaluationForm[t._id].attendance)==="Tidak Hadir"),r(2),P("active",(s.evaluationForm[t._id]==null?null:s.evaluationForm[t._id].attendance)==="Izin"),r(2),P("active",(s.evaluationForm[t._id]==null?null:s.evaluationForm[t._id].attendance)==="Sakit"),r(5),F("ngModel",s.evaluationForm[t._id].notes),dt("aria-label","Catatan untuk "+t.fullName),r(2),b(s.getPreviousNotes(t._id).length>0?27:-1)}}function me(c,n){c&1&&(o(0,"span"),a(1,"\u{1F4BE} Simpan Evaluasi"),e())}function pe(c,n){c&1&&(o(0,"span"),S(1,"span",18),a(2," \u23F3 Menyimpan..."),e())}function _e(c,n){if(c&1){let t=O();o(0,"div",71),p("click",function(){_(t);let s=d();return u(s.closeEvaluationForm())}),o(1,"div",72),p("click",function(s){return _(t),u(s.stopPropagation())}),o(2,"div",73)(3,"h2"),a(4,"\u{1F4DD} Input/Edit Evaluasi Latihan"),e(),o(5,"button",74),p("click",function(){_(t);let s=d();return u(s.closeEvaluationForm())}),a(6," \u2715 "),e()(),o(7,"div",75)(8,"div",76)(9,"div",77)(10,"div",78)(11,"span",79),a(12,"Tanggal:"),e(),o(13,"span",80),a(14),e()(),o(15,"div",78)(16,"span",79),a(17,"Waktu:"),e(),o(18,"span",80),a(19),e()(),o(20,"div",78)(21,"span",79),a(22,"Lokasi:"),e(),o(23,"span",80),a(24),e()(),o(25,"div",78)(26,"span",79),a(27,"Kategori:"),e(),o(28,"span",80),a(29),e()(),o(30,"div",78)(31,"span",79),a(32,"Tipe:"),e(),o(33,"span",80)(34,"span",41),a(35),e()()(),h(36,de,5,1,"div",78),o(37,"div",78)(38,"span",79),a(39,"Siswa:"),e(),o(40,"span",80),a(41),e()()()(),o(42,"div",81)(43,"span",82),a(44,"\u{1F3AF} Set semua kehadiran:"),e(),o(45,"div",83)(46,"button",84),p("click",function(){_(t);let s=d();return u(s.setAllAttendance("Hadir"))}),a(47," \u2713 Semua Hadir "),e(),o(48,"button",85),p("click",function(){_(t);let s=d();return u(s.setAllAttendance("Tidak Hadir"))}),a(49," \u2715 Semua Tidak Hadir "),e(),o(50,"button",86),p("click",function(){_(t);let s=d();return u(s.setAllAttendance("Izin"))}),a(51," \u{1F4DD} Semua Izin "),e(),o(52,"button",87),p("click",function(){_(t);let s=d();return u(s.setAllAttendance("Sakit"))}),a(53," \u{1F912} Semua Sakit "),e()()(),o(54,"div",88)(55,"div",89)(56,"h3"),a(57,"\u{1F4CB} Input Evaluasi per Siswa"),e(),o(58,"span",43),a(59),e()(),Y(60,ge,28,15,"div",90,Vt),e()(),o(62,"div",91)(63,"button",92),p("click",function(){_(t);let s=d();return u(s.closeEvaluationForm())}),a(64," Batal "),e(),o(65,"button",93),p("click",function(){_(t);let s=d();return u(s.saveEvaluations())}),h(66,me,2,0,"span")(67,pe,3,0,"span"),e()()()()}if(c&2){let t=d();r(14),l(t.formatDate(t.selectedSession.scheduleDate)),r(5),l(t.selectedSession.scheduleTime),r(5),l(t.selectedSession.location),r(5),l(t.selectedSession.programCategory),r(5),g("ngClass",t.getSessionBadgeClass(t.selectedSession.scheduleType)),r(),k(" ",t.getSessionIcon(t.selectedSession.scheduleType)," ",t.getSessionBadgeLabel(t.selectedSession.scheduleType)," "),r(),b(t.selectedSession.groupName&&t.isGroupOrSemiPrivateSession(t.selectedSession)?36:-1),r(5),f("",t.selectedSession.students.length||0," orang"),r(18),f("",t.selectedSession.students.length||0," siswa"),r(),G(t.selectedSession.students),r(3),g("disabled",t.isSavingEvaluation),r(2),g("disabled",t.isSavingEvaluation),r(),b(t.isSavingEvaluation?67:66)}}var tt=class c{constructor(n,t,i){this.http=n;this.cdr=t;this.authService=i}dateRange;toast=new V;isLoading=!1;isSavingEvaluation=!1;isExporting=!1;coachReport=null;currentUser=null;userRole="guest";isCoach=!1;userCoachId=null;selectedSession=null;evaluationForm={};showEvaluationModal=!1;previousCoachNotes={};loadDuration="";destroy$=new L;ngOnInit(){console.log("\u{1F3CA} Coach Report initialized"),this.currentUser=this.authService.getUser(),this.userRole=this.currentUser?.role||"guest",this.isCoach=this.userRole==="coach",this.isCoach&&this.currentUser?.coachId&&(this.userCoachId=typeof this.currentUser.coachId=="object"?this.currentUser.coachId._id:this.currentUser.coachId,console.log("\u{1F468}\u200D\u{1F3EB} Coach - coachId:",this.userCoachId)),this.loadCoachReport()}ngOnChanges(n){n.dateRange&&!n.dateRange.firstChange&&this.loadCoachReport()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}extractPrivateStudent(n){if(console.log(`
\u{1F4CD} [extractPrivateStudent] Session: ${n.scheduleId}`),console.log(`   Type: ${n.scheduleType}`),console.log("   studentId:",n.studentId),console.log("   studentId type:",typeof n.studentId),n.studentId&&typeof n.studentId=="object"&&n.studentId._id){console.log("   \u2705 CASE 1: studentId is populated object");let t={_id:n.studentId._id.toString?.()||n.studentId._id,studentId:n.studentId.studentId||n.studentId._id.toString?.()||"",fullName:n.studentId.fullName||"Unknown Student",classLevel:n.studentId.classLevel||""};return console.log(`   \u2705 Extracted: ${t.fullName}`),t}if(n.studentId&&typeof n.studentId=="string"){console.log("   \u26A0\uFE0F CASE 2: studentId is string");let t={_id:n.studentId,studentId:n.studentId,fullName:n.studentName||"Unknown Student",classLevel:""};return console.log(`   \u26A0\uFE0F Using fallback: ${t.fullName}`),t}return console.log("   \u274C CASE 3: No valid studentId"),null}normalizeSessionData(n){return console.log(`
\u{1F50D} normalizeSessionData - Processing sessions`),n.map((t,i)=>{if(console.log(`
  [Session ${i}]`),console.log(`  ID: ${t.scheduleId}`),console.log(`  Type: ${t.scheduleType}`),console.log(`  Current students count: ${t.students?.length||0}`),t.scheduleType==="private"&&(!t.students||t.students.length===0)){console.log("  \u26A0\uFE0F PRIVATE with empty students - extracting from studentId");let s=this.extractPrivateStudent(t);s?t.students=[s]:t.students=[]}return t.scheduleType==="semiPrivate"&&(t.students||(console.log("  \u26A0\uFE0F SEMI PRIVATE with undefined students"),t.students=[])),t.scheduleType==="group"&&(t.students||(console.log("  \u26A0\uFE0F GROUP with undefined students"),t.students=[])),t.students||(t.students=[]),console.log(`  \u{1F4CA} Final students: ${t.students.length}`),t})}loadCoachReport(){let n=performance.now();this.isLoading=!0;let t={startDate:this.dateRange.startDate,endDate:this.dateRange.endDate};this.isCoach&&this.userCoachId&&(t.coachId=this.userCoachId,console.log("\u{1F50D} Filtering for coach:",this.userCoachId)),console.log(`
`+"=".repeat(80)),console.log("\u{1F4CA} Loading Coach Report"),console.log("=".repeat(80)),this.http.get(`${w.apiUrl}/evaluations/coach-report`,{params:t}).pipe(v(this.destroy$),x(()=>{this.isLoading=!1;let i=performance.now()-n;this.loadDuration=`${Math.round(i)}ms`,console.log(`\u2705 Report loaded in ${this.loadDuration}
`),this.cdr.detectChanges()})).subscribe({next:i=>{if(console.log(`
\u{1F4CA} Raw API Response:`),console.log(i),i.data&&i.data.coachReports){i.data.coachReports.forEach(m=>{console.log(`
\u{1F468}\u200D\u{1F3EB} Coach: ${m.coachName}`),console.log(`   Sessions before: ${m.sessions.length}`),m.sessions=this.normalizeSessionData(m.sessions),console.log(`   Sessions after: ${m.sessions.length}`),m.sessions.forEach((E,q)=>{console.log(`     [${q}] ${E.scheduleType}: ${E.students.length} students`)})});let s=this.mergeAllCoachesIntoOne(i.data.coachReports);i.data.coachReports=[s],i.data.stats.totalCoaches=1,console.log(`
`+"=".repeat(80)),console.log("\u2705 FINAL VALIDATION:"),console.log("=".repeat(80)),s.sessions.forEach((m,E)=>{let q=m.students.length>0?"\u2705":"\u274C";console.log(`  [${E}] ${m.scheduleType}: ${m.students.length} students ${q}`)}),console.log("=".repeat(80)+`
`)}this.coachReport=i.data},error:i=>{console.error("\u274C Error:",i),this.toast.emit({message:"Gagal memuat laporan",type:"error"})}})}mergeAllCoachesIntoOne(n){if(console.log(`
\u{1F504} Merging all coaches...`),n.length===0)return{coachId:"",coachName:"No Data",specialization:"",totalSessions:0,completedSessions:0,cancelledSessions:0,upcomingSessions:0,sessions:[]};let t=new Map;n.forEach(M=>{M.sessions?.forEach(T=>{t.has(T.scheduleId)||t.set(T.scheduleId,T)})});let i=Array.from(t.values()),s=n.map(M=>M.coachName).filter((M,T,ft)=>ft.indexOf(M)===T).join(" & "),m=i.filter(M=>M.status?.toLowerCase()==="completed"||M.status?.toLowerCase()==="selesai").length,E=i.filter(M=>M.status?.toLowerCase()==="cancelled"||M.status?.toLowerCase()==="batal").length,q=i.filter(M=>M.status?.toLowerCase()==="scheduled"||M.status?.toLowerCase()==="pending"||M.status?.toLowerCase()==="active").length,rt=new Set;i.forEach(M=>{M.students?.forEach(T=>{rt.add(T._id)})});let nt={coachId:n[0].coachId,coachName:s,specialization:n[0].specialization,sessions:i,totalSessions:i.length,completedSessions:m,cancelledSessions:E,upcomingSessions:q,totalStudents:rt.size};return console.log("\u2705 Merged:"),console.log(`   Coaches: ${s}`),console.log(`   Total sessions: ${nt.totalSessions}`),console.log(`   Total students: ${nt.totalStudents}`),nt}openEvaluationForm(n){if(console.log(`
\u{1F4DD} openEvaluationForm`),console.log("   Session ID:",n.scheduleId),console.log("   Type:",n.scheduleType),console.log("   Status:",n.status),console.log("   Students:",n.students?.length||0),!this.canEvaluateSession(n)){this.toast.emit({message:"Sesi ini sudah dibatalkan",type:"warning"});return}if(!n.students||n.students.length===0){console.error("\u274C No students in session"),this.toast.emit({message:"Tidak ada siswa dalam sesi ini",type:"error"});return}this.selectedSession=n,this.evaluationForm={},this.previousCoachNotes={},n.students.forEach(t=>{let i=n.evaluations?.find(s=>s.studentId===t._id.toString());this.evaluationForm[t._id]={attendance:i?.attendance||"Hadir",notes:i?.notes||""},i?.coachNotesHistory&&(this.previousCoachNotes[t._id]=i.coachNotesHistory)}),this.showEvaluationModal=!0,console.log("\u2705 Form opened with",n.students.length,"students"),this.cdr.detectChanges()}canEvaluateSession(n){return!["cancelled","batal"].includes(n.status?.toLowerCase()||"")}closeEvaluationForm(){this.showEvaluationModal=!1,this.selectedSession=null,this.evaluationForm={},this.previousCoachNotes={},this.cdr.detectChanges()}saveEvaluations(){if(!this.selectedSession||this.isSavingEvaluation)return;console.log("\u{1F4BE} Saving evaluations...");let n=(this.selectedSession.students||[]).map(i=>{let s=this.evaluationForm[i._id];return{studentId:i._id,attendance:s?.attendance||"Hadir",notes:s?.notes||""}}),t={scheduleId:this.selectedSession.scheduleId,coachId:this.userCoachId||"",trainingDate:this.selectedSession.scheduleDate,evaluations:n};console.log("\u{1F4E4} Bulk data:",t),this.isSavingEvaluation=!0,this.http.post(`${w.apiUrl}/evaluations/bulk`,t).pipe(v(this.destroy$),x(()=>{this.isSavingEvaluation=!1,this.cdr.detectChanges()})).subscribe({next:i=>{console.log("\u2705 Saved:",i),this.toast.emit({message:i.message||"Evaluasi berhasil disimpan",type:"success"}),this.closeEvaluationForm(),this.loadCoachReport()},error:i=>{console.error("\u274C Error:",i),this.toast.emit({message:"Gagal menyimpan",type:"error"})}})}setAllAttendance(n){this.selectedSession?.students&&(this.selectedSession.students.forEach(t=>{this.evaluationForm[t._id]&&(this.evaluationForm[t._id].attendance=n)}),this.cdr.detectChanges())}exportPDF(){if(this.isExporting||!this.coachReport)return;this.isExporting=!0,this.toast.emit({message:"Mengekspor PDF...",type:"info"});let n={startDate:this.dateRange.startDate,endDate:this.dateRange.endDate,format:"pdf",reportType:"coach"};this.isCoach&&this.userCoachId&&(n.coachId=this.userCoachId),this.http.get(`${w.apiUrl}/reports/export`,{params:n,responseType:"blob"}).pipe(v(this.destroy$),x(()=>{this.isExporting=!1,this.cdr.detectChanges()})).subscribe({next:t=>{this.downloadFile(t,`laporan-coach-${Date.now()}.pdf`),this.toast.emit({message:"PDF berhasil diunduh",type:"success"})},error:()=>{this.toast.emit({message:"Gagal export PDF",type:"error"})}})}exportExcel(){if(this.isExporting||!this.coachReport)return;this.isExporting=!0,this.toast.emit({message:"Mengekspor Excel...",type:"info"});let n={startDate:this.dateRange.startDate,endDate:this.dateRange.endDate,format:"excel",reportType:"coach"};this.isCoach&&this.userCoachId&&(n.coachId=this.userCoachId),this.http.get(`${w.apiUrl}/reports/export`,{params:n,responseType:"blob"}).pipe(v(this.destroy$),x(()=>{this.isExporting=!1,this.cdr.detectChanges()})).subscribe({next:t=>{this.downloadFile(t,`laporan-coach-${Date.now()}.xlsx`),this.toast.emit({message:"Excel berhasil diunduh",type:"success"})},error:()=>{this.toast.emit({message:"Gagal export Excel",type:"error"})}})}downloadFile(n,t){let i=window.URL.createObjectURL(n),s=document.createElement("a");s.href=i,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i)}hasEvaluation(n){return!!(n.evaluations&&n.evaluations.length>0)}getEvaluationCount(n){return n.evaluations?.length||0}formatDate(n){return new Date(n).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})}formatDateTime(n){return new Date(n).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}getSessionBadgeType(n){return n==="private"?"private":n==="semiPrivate"?"semiPrivate":"group"}getSessionBadgeLabel(n){return n==="private"?"Private 1:1":n==="semiPrivate"?"Semi Private":"Group Class"}getSessionBadgeClass(n){return n==="private"?"badge-private":n==="semiPrivate"?"badge-semiprivate":"badge-group"}getSessionIcon(n){return n==="private"?"\u{1F464}":n==="semiPrivate"?"\u{1F465}":"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}"}getCoachesDisplay(n){if(!n.evaluations||n.evaluations.length===0)return"-";let t=new Set;return n.evaluations.forEach(i=>{i.coachEvaluations?.forEach(s=>{t.add(s.coachName)})}),Array.from(t).join(", ")||"-"}formatNumber(n){return n?.toString()||"0"}getPreviousNotes(n){return this.previousCoachNotes[n]||[]}formatPreviousNotes(n){return!n||n.length===0?"":n.map(t=>{let i=new Date(t.addedAt).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return`[${t.coachName}] (${i}): ${t.notes}`}).join(`

`)}getStudentCountLabel(n){let t=n.students?.length||0;return n.scheduleType==="private"?"1 Siswa":n.scheduleType==="semiPrivate"?`${t} Siswa (Semi Private)`:`${t} Siswa (Group)`}isGroupOrSemiPrivateSession(n){return n.scheduleType==="group"||n.scheduleType==="semiPrivate"}isPrivateSession(n){return n.scheduleType==="private"}static \u0275fac=function(t){return new(t||c)(y(j),y(A),y(X))};static \u0275cmp=D({type:c,selectors:[["app-coach-report"]],inputs:{dateRange:"dateRange"},outputs:{toast:"toast"},features:[$],decls:5,vars:4,consts:[[1,"coach-report-container"],[1,"loading-overlay"],[1,"empty-state"],[1,"report-content"],[1,"modal-overlay"],[1,"spinner"],[1,"empty-icon"],[1,"summary-grid"],[1,"summary-card","total"],[1,"card-icon"],[1,"card-info"],[1,"summary-card","active"],[1,"summary-card","evaluations"],[1,"export-actions"],["type","button",1,"btn-export","pdf",3,"click","disabled"],["type","button",1,"btn-export","excel",3,"click","disabled"],[1,"coach-reports-container"],[1,"coach-report-card"],[1,"spinner-small"],[1,"coach-header"],[1,"coach-info"],[1,"coach-stats"],[1,"stat-badge","completed"],[1,"stat-label"],[1,"stat-value"],[1,"stat-badge","upcoming"],[1,"stat-badge","cancelled"],[1,"sessions-table-wrapper"],[1,"sessions-table"],[1,"no-sessions"],[1,"col-no"],[1,"col-date"],[1,"col-time"],[1,"col-location"],[1,"col-category"],[1,"col-type"],[1,"col-students"],[1,"col-status"],[1,"col-evaluation"],[1,"col-action"],[1,"date-value"],[1,"badge","badge-type",3,"ngClass"],[1,"student-info"],[1,"student-count"],[1,"group-name"],[1,"badge","status-badge"],[1,"evaluation-status","completed"],[1,"evaluation-status","pending"],["type","button",1,"btn-small","btn-primary",3,"click","disabled","title"],[1,"evaluation-details-row",3,"group-session","semiprivate-session","private-session"],[1,"eval-icon"],[1,"eval-text"],[1,"evaluation-details-row"],["colspan","10"],[1,"evaluation-details"],[1,"details-header"],[1,"type-label","private-label"],[1,"type-label","semiprivate-label"],[1,"type-label","group-label"],[1,"evaluation-grid"],[1,"eval-card",3,"alt"],[1,"eval-card"],[1,"eval-card-header"],[1,"student-info-header"],[1,"student-name"],[1,"student-level"],[1,"attendance-badge-simple"],[1,"eval-notes-section"],[1,"no-notes"],[1,"eval-notes"],[1,"no-sessions-icon"],[1,"modal-overlay",3,"click"],[1,"modal-container","evaluation-modal",3,"click"],[1,"modal-header"],["type","button","aria-label","Close modal",1,"btn-close",3,"click"],[1,"modal-body"],[1,"session-info"],[1,"info-grid"],[1,"info-row"],[1,"info-label"],[1,"info-value"],[1,"quick-actions"],[1,"quick-actions-label"],[1,"quick-action-buttons"],["type","button","title","Set semua siswa status Hadir",1,"btn-quick-action","success",3,"click"],["type","button","title","Set semua siswa status Tidak Hadir",1,"btn-quick-action","danger",3,"click"],["type","button","title","Set semua siswa status Izin",1,"btn-quick-action","warning",3,"click"],["type","button","title","Set semua siswa status Sakit",1,"btn-quick-action","info",3,"click"],[1,"evaluation-list"],[1,"evaluation-list-header"],[1,"evaluation-item"],[1,"modal-footer"],["type","button",1,"btn-secondary",3,"click","disabled"],["type","button",1,"btn-primary",3,"click","disabled"],[1,"student-header"],[1,"student-number"],[1,"student-meta"],[1,"evaluation-form"],[1,"form-group"],[1,"form-label"],[1,"attendance-buttons"],["type","button","title","Siswa hadir",1,"attendance-btn","hadir",3,"click"],["type","button","title","Siswa tidak hadir",1,"attendance-btn","absent",3,"click"],["type","button","title","Siswa izin",1,"attendance-btn","excused",3,"click"],["type","button","title","Siswa sakit",1,"attendance-btn","sick",3,"click"],["placeholder","Tulis catatan progress, evaluasi, atau hal penting lainnya...","rows","3",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"previous-notes"],[1,"notes-header"],[1,"notes-content"]],template:function(t,i){t&1&&(o(0,"div",0),h(1,At,4,0,"div",1),h(2,Ht,7,0,"div",2),h(3,se,36,7,"div",3),e(),h(4,_e,68,13,"div",4)),t&2&&(r(),b(i.isLoading?1:-1),r(),b(!i.coachReport&&!i.isLoading?2:-1),r(),b(i.coachReport&&!i.isLoading?3:-1),r(),b(i.showEvaluationModal&&i.selectedSession?4:-1))},dependencies:[I,K,R,U,B,W,mt],styles:[".coach-report-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.loading-overlay[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;gap:1rem}.loading-overlay[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #e2e8f0;border-top-color:#0ea5e9;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:.95rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.5rem;font-weight:700;color:#1e293b}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#64748b}.export-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-bottom:2rem;flex-wrap:wrap}.export-actions[_ngcontent-%COMP%]   .btn-export[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#0ea5e9;color:#fff;border:none;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s ease;white-space:nowrap}.export-actions[_ngcontent-%COMP%]   .btn-export[_ngcontent-%COMP%]:hover:not(:disabled){background:#0b83b9;transform:translateY(-2px);box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.export-actions[_ngcontent-%COMP%]   .btn-export[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;margin-bottom:2rem}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;display:flex;align-items:center;gap:1.25rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:all .2s ease}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:60px;height:60px;display:flex;align-items:center;justify-content:center;border-radius:12px;background:#10b9811a}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1.75rem;font-weight:700;color:#1e293b}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#64748b}.summary-grid[_ngcontent-%COMP%]   .summary-card.total[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981}.summary-grid[_ngcontent-%COMP%]   .summary-card.active[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#0ea5e91a;color:#0ea5e9}.coach-reports-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.coach-report-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;overflow:hidden}.coach-report-card[_ngcontent-%COMP%]   .coach-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#0c8a60);padding:1.5rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.coach-report-card[_ngcontent-%COMP%]   .coach-header[_ngcontent-%COMP%]   .coach-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#fff;font-size:1.25rem;font-weight:700}.coach-report-card[_ngcontent-%COMP%]   .coach-header[_ngcontent-%COMP%]   .coach-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#ffffffe6;font-size:.9rem}.coach-report-card[_ngcontent-%COMP%]   .coach-header[_ngcontent-%COMP%]   .coach-stats[_ngcontent-%COMP%]{display:flex;gap:1rem}.coach-report-card[_ngcontent-%COMP%]   .coach-header[_ngcontent-%COMP%]   .coach-stats[_ngcontent-%COMP%]   .stat-badge[_ngcontent-%COMP%]{background:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:.75rem 1rem;border-radius:8px;text-align:center;min-width:80px;border:2px solid rgba(255,255,255,.3)}.coach-report-card[_ngcontent-%COMP%]   .coach-header[_ngcontent-%COMP%]   .coach-stats[_ngcontent-%COMP%]   .stat-badge.completed[_ngcontent-%COMP%]{border-color:#ffffff80}.coach-report-card[_ngcontent-%COMP%]   .coach-header[_ngcontent-%COMP%]   .coach-stats[_ngcontent-%COMP%]   .stat-badge.upcoming[_ngcontent-%COMP%]{border-color:#f59e0bcc}.coach-report-card[_ngcontent-%COMP%]   .coach-header[_ngcontent-%COMP%]   .coach-stats[_ngcontent-%COMP%]   .stat-badge.cancelled[_ngcontent-%COMP%]{border-color:#ef4444cc}.coach-report-card[_ngcontent-%COMP%]   .coach-header[_ngcontent-%COMP%]   .coach-stats[_ngcontent-%COMP%]   .stat-badge[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{display:block;color:#ffffffe6;font-size:.75rem;margin-bottom:.25rem}.coach-report-card[_ngcontent-%COMP%]   .coach-header[_ngcontent-%COMP%]   .coach-stats[_ngcontent-%COMP%]   .stat-badge[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{display:block;color:#fff;font-size:1.5rem;font-weight:700}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]{padding:1.5rem;overflow-x:auto}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.875rem}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f8fafc}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.75rem;text-align:left;font-weight:600;color:#1e293b;border-bottom:2px solid #e2e8f0;white-space:nowrap}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0;transition:all .2s ease}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#0ea5e905}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .student-count[_ngcontent-%COMP%]{font-weight:600;color:#0ea5e9}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .student-names[_ngcontent-%COMP%]{margin-top:.25rem}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .student-names[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#64748b;font-size:.75rem}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:6px;font-size:.75rem;font-weight:600}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge.badge-success[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge.badge-warning[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge.badge-danger[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn-small[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.75rem;border-radius:6px;font-weight:600;cursor:pointer;transition:all .2s ease;border:none;white-space:nowrap}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn-small.btn-primary[_ngcontent-%COMP%]{background:#0ea5e9;color:#fff}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn-small.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0b83b9}.coach-report-card[_ngcontent-%COMP%]   .sessions-table-wrapper[_ngcontent-%COMP%]   .sessions-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn-small.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem;animation:_ngcontent-%COMP%_fadeIn .2s ease}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;max-width:900px;width:100%;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;animation:_ngcontent-%COMP%_slideUp .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:2px solid #e2e8f0;display:flex;justify-content:space-between;align-items:center}.modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:700;color:#1e293b}.modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#64748b;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:8px;transition:all .2s ease}.modal-container[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#f8fafc;color:#1e293b}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:1.5rem;overflow-y:auto;flex:1}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .session-info[_ngcontent-%COMP%]{background:#f8fafc;border-radius:8px;padding:1rem;margin-bottom:1.5rem;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .session-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .session-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;font-weight:500}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .session-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:.95rem;color:#1e293b;font-weight:600}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;padding:1rem;background:#3b82f60d;border-radius:8px}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;font-size:.875rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .btn-quick-action[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:6px;font-size:.875rem;font-weight:600;cursor:pointer;transition:all .2s ease}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .btn-quick-action.success[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .btn-quick-action.success[_ngcontent-%COMP%]:hover{background:#10b981;color:#fff}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .btn-quick-action.danger[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .btn-quick-action.danger[_ngcontent-%COMP%]:hover{background:#ef4444;color:#fff}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .btn-quick-action.warning[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .btn-quick-action.warning[_ngcontent-%COMP%]:hover{background:#f59e0b;color:#fff}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:8px;padding:1rem;transition:all .2s ease}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]:hover{border-color:#0ea5e9;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid #e2e8f0}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]   .student-number[_ngcontent-%COMP%]{width:32px;height:32px;background:#0ea5e9;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.875rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1rem;color:#1e293b}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .student-header[_ngcontent-%COMP%]   .student-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .evaluation-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .evaluation-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .evaluation-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#1e293b}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .evaluation-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .attendance-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:.5rem}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .evaluation-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .attendance-buttons[_ngcontent-%COMP%]   .attendance-btn[_ngcontent-%COMP%]{padding:.75rem;border:2px solid #e2e8f0;background:#fff;border-radius:8px;font-size:.875rem;font-weight:600;cursor:pointer;transition:all .2s ease;color:#1e293b}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .evaluation-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .attendance-buttons[_ngcontent-%COMP%]   .attendance-btn[_ngcontent-%COMP%]:hover{border-color:#0ea5e9;background:#0ea5e90d}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .evaluation-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .attendance-buttons[_ngcontent-%COMP%]   .attendance-btn.active[_ngcontent-%COMP%]{border-color:#10b981;background:#10b981;color:#fff}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .evaluation-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .attendance-buttons[_ngcontent-%COMP%]   .attendance-btn.absent.active[_ngcontent-%COMP%]{border-color:#ef4444;background:#ef4444}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .evaluation-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .attendance-buttons[_ngcontent-%COMP%]   .attendance-btn.excused.active[_ngcontent-%COMP%]{border-color:#f59e0b;background:#f59e0b}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .evaluation-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .attendance-buttons[_ngcontent-%COMP%]   .attendance-btn.sick.active[_ngcontent-%COMP%]{border-color:#3b82f6;background:#3b82f6}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .evaluation-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.75rem;border:2px solid #e2e8f0;border-radius:8px;font-size:.875rem;font-family:inherit;resize:vertical;transition:all .2s ease}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .evaluation-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#0ea5e9;box-shadow:0 0 0 3px #0ea5e91a}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:2px solid #e2e8f0;display:flex;justify-content:flex-end;gap:1rem}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%], .modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s ease;border:none}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#f8fafc;color:#1e293b}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#e6edf4}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#0ea5e9;color:#fff}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0b83b9}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.coach-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start!important}.coach-header[_ngcontent-%COMP%]   .coach-stats[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.coach-header[_ngcontent-%COMP%]   .coach-stats[_ngcontent-%COMP%]   .stat-badge[_ngcontent-%COMP%]{flex:1;min-width:70px}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .btn-quick-action[_ngcontent-%COMP%]{width:100%}.modal-container[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .evaluation-list[_ngcontent-%COMP%]   .evaluation-item[_ngcontent-%COMP%]   .attendance-buttons[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{flex-direction:column}.modal-container[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};function ue(c,n){c&1&&(o(0,"div",4),S(1,"div",5),o(2,"p"),a(3,"Memuat laporan keuangan..."),e()())}function Ce(c,n){c&1&&(o(0,"div",6)(1,"div",7),a(2,"\u{1F4B0}"),e(),o(3,"h3"),a(4,"Tidak Ada Data"),e(),o(5,"p"),a(6,"Tidak ada data laporan keuangan untuk periode yang dipilih"),e()())}function fe(c,n){if(c&1&&(o(0,"div",31)(1,"div",32),a(2),e(),o(3,"div",33)(4,"div",34)(5,"span",35),a(6),e()()(),o(7,"div",36),a(8),e()()),c&2){let t=n.$implicit,i=d(2);r(2),l(t.method),r(2),Q("width",t.percentage,"%"),r(2),l(i.formatCurrency(t.total)),r(2),l(i.formatPercentage(t.percentage))}}function he(c,n){if(c&1&&(o(0,"div",31)(1,"div",32),a(2),e(),o(3,"div",33)(4,"div",37)(5,"span",35),a(6),e()()(),o(7,"div",36),a(8),e()()),c&2){let t=n.$implicit,i=d(2);r(2),l(t.month),r(2),Q("width",i.getMaxRevenue()>0?t.revenue/i.getMaxRevenue()*100:0,"%"),r(2),l(t.count),r(2),l(i.formatCurrency(t.revenue))}}function be(c,n){if(c&1&&(o(0,"small"),a(1),e()),c&2){let t=d(2);r(),f("\u26A1 Loaded in ",t.loadDuration)}}function Pe(c,n){if(c&1&&(o(0,"tr")(1,"td"),a(2),e(),o(3,"td"),a(4),e(),o(5,"td")(6,"strong"),a(7),e()(),o(8,"td"),a(9),e(),o(10,"td")(11,"strong",38),a(12),e()(),o(13,"td"),a(14),e(),o(15,"td")(16,"span",39),a(17),e()()()),c&2){let t=n.$implicit,i=n.index,s=d(2);r(2),l(i+1),r(2),l(s.formatDate(t.paymentDate)),r(3),l(t.studentName),r(2),l(t.month),r(3),l(s.formatCurrency(t.amount)),r(2),l(t.method),r(2),P("badge-success",t.status==="Paid")("badge-warning",t.status==="Late"),r(),f(" ",t.status," ")}}function Me(c,n){c&1&&(o(0,"div",40)(1,"p"),a(2,"\u{1F4DD} Tidak ada transaksi pembayaran dalam periode ini"),e()())}function Oe(c,n){if(c&1&&(o(0,"tr")(1,"td"),a(2),e(),o(3,"td"),a(4),e(),o(5,"td")(6,"strong"),a(7),e()(),o(8,"td")(9,"span",42),a(10),e()(),o(11,"td")(12,"strong",43),a(13),e()()()),c&2){let t=n.$implicit,i=n.index,s=d(3);r(2),l(i+1),r(2),l(t.studentId),r(3),l(t.fullName),r(3),f("",t.monthsUnpaid," bulan"),r(3),l(s.formatCurrency(t.totalUnpaid))}}function xe(c,n){if(c&1&&(o(0,"div",41)(1,"div",24)(2,"h3"),a(3),e()(),o(4,"div",26)(5,"table",27)(6,"thead")(7,"tr")(8,"th"),a(9,"No"),e(),o(10,"th"),a(11,"ID"),e(),o(12,"th"),a(13,"Nama Siswa"),e(),o(14,"th"),a(15,"Bulan Tertunggak"),e(),o(16,"th"),a(17,"Total Tunggakan"),e()()(),o(18,"tbody"),C(19,Oe,14,5,"tr",28),e()()()()),c&2){let t=d(2);r(3),f("\u26A0\uFE0F Daftar Tunggakan (",t.financialReport.overdueList.length,")"),r(16),g("ngForOf",t.financialReport.overdueList)}}function ve(c,n){if(c&1){let t=O();o(0,"div",8)(1,"div",9)(2,"button",10),p("click",function(){_(t);let s=d();return u(s.exportPDF())}),a(3," \u{1F4C4} Export PDF "),e(),o(4,"button",10),p("click",function(){_(t);let s=d();return u(s.exportExcel())}),a(5," \u{1F4CA} Export Excel "),e()(),o(6,"div",11)(7,"div",12)(8,"div",13),a(9,"\u{1F4B0}"),e(),o(10,"div",14)(11,"h3"),a(12),e(),o(13,"p"),a(14,"Total Pendapatan"),e()()(),o(15,"div",15)(16,"div",13),a(17,"\u{1F4CA}"),e(),o(18,"div",14)(19,"h3"),a(20),e(),o(21,"p"),a(22,"Total Transaksi"),e()()(),o(23,"div",16)(24,"div",13),a(25,"\u26A0\uFE0F"),e(),o(26,"div",14)(27,"h3"),a(28),e(),o(29,"p"),a(30,"Total Tunggakan"),e()()(),o(31,"div",17)(32,"div",13),a(33,"\u{1F4C8}"),e(),o(34,"div",14)(35,"h3"),a(36),e(),o(37,"p"),a(38,"Rata-rata Pembayaran"),e()()()(),o(39,"div",18)(40,"div",19)(41,"h3"),a(42,"\u{1F4B3} Metode Pembayaran"),e(),o(43,"div",20)(44,"div",21),C(45,fe,9,5,"div",22),e()()(),o(46,"div",19)(47,"h3"),a(48,"\u{1F4C8} Pendapatan Bulanan"),e(),o(49,"div",20)(50,"div",21),C(51,he,9,5,"div",22),e()()()(),o(52,"div",23)(53,"div",24)(54,"h3"),a(55),e(),C(56,be,2,1,"small",25),e(),o(57,"div",26)(58,"table",27)(59,"thead")(60,"tr")(61,"th"),a(62,"No"),e(),o(63,"th"),a(64,"Tanggal"),e(),o(65,"th"),a(66,"Siswa"),e(),o(67,"th"),a(68,"Bulan"),e(),o(69,"th"),a(70,"Jumlah"),e(),o(71,"th"),a(72,"Metode"),e(),o(73,"th"),a(74,"Status"),e()()(),o(75,"tbody"),C(76,Pe,18,11,"tr",28),e()(),C(77,Me,3,0,"div",29),e()(),C(78,xe,20,2,"div",30),e()}if(c&2){let t=d();r(2),g("disabled",t.isExporting),r(2),g("disabled",t.isExporting),r(8),l(t.formatCurrency(t.financialReport.summary.totalRevenue)),r(8),l(t.formatNumber(t.financialReport.summary.totalPayments)),r(8),l(t.formatCurrency(t.financialReport.summary.totalUnpaid)),r(8),l(t.formatCurrency(t.financialReport.summary.averagePayment)),r(9),g("ngForOf",t.financialReport.byMethod),r(6),g("ngForOf",t.financialReport.monthlyRevenue.slice(0,6)),r(4),f("\u{1F4CB} Detail Pembayaran (",t.financialReport.paymentDetails.length,")"),r(),g("ngIf",t.loadDuration),r(20),g("ngForOf",t.financialReport.paymentDetails),r(),g("ngIf",t.financialReport.paymentDetails.length===0),r(),g("ngIf",t.financialReport.overdueList&&t.financialReport.overdueList.length>0)}}var et=class c{constructor(n,t){this.http=n;this.cdr=t}dateRange;toast=new V;isLoading=!1;isExporting=!1;financialReport=null;loadDuration="";destroy$=new L;ngOnInit(){console.log("\u{1F4B0} Financial Report Component initialized"),this.loadFinancialReport()}ngOnChanges(n){n.dateRange&&!n.dateRange.firstChange&&this.loadFinancialReport()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadFinancialReport(){let n=performance.now();this.isLoading=!0;let t={startDate:this.dateRange.startDate,endDate:this.dateRange.endDate};this.http.get(`${w.apiUrl}/reports/financial`,{params:t}).pipe(v(this.destroy$),x(()=>{this.isLoading=!1;let i=performance.now()-n;this.loadDuration=`${Math.round(i)}ms`,console.log(`\u2705 Financial report loaded in ${this.loadDuration}`),this.cdr.detectChanges()})).subscribe({next:i=>{console.log("Financial report:",i),this.financialReport=i.data},error:i=>{console.error("Error loading financial report:",i),this.toast.emit({message:"Gagal memuat laporan keuangan",type:"error"})}})}exportPDF(){if(this.isExporting)return;this.isExporting=!0,this.toast.emit({message:"Mengekspor laporan ke PDF...",type:"info"});let n={startDate:this.dateRange.startDate,endDate:this.dateRange.endDate,format:"pdf",reportType:"financial"};this.http.get(`${w.apiUrl}/reports/export`,{params:n,responseType:"blob"}).pipe(v(this.destroy$),x(()=>{this.isExporting=!1,this.cdr.detectChanges()})).subscribe({next:t=>{this.downloadFile(t,`laporan-keuangan-${Date.now()}.pdf`),this.toast.emit({message:"Laporan PDF berhasil diunduh!",type:"success"})},error:()=>{this.toast.emit({message:"Gagal mengekspor PDF",type:"error"})}})}exportExcel(){if(this.isExporting)return;this.isExporting=!0,this.toast.emit({message:"Mengekspor laporan ke Excel...",type:"info"});let n={startDate:this.dateRange.startDate,endDate:this.dateRange.endDate,format:"excel",reportType:"financial"};this.http.get(`${w.apiUrl}/reports/export`,{params:n,responseType:"blob"}).pipe(v(this.destroy$),x(()=>{this.isExporting=!1,this.cdr.detectChanges()})).subscribe({next:t=>{this.downloadFile(t,`laporan-keuangan-${Date.now()}.xlsx`),this.toast.emit({message:"Laporan Excel berhasil diunduh!",type:"success"})},error:()=>{this.toast.emit({message:"Gagal mengekspor Excel",type:"error"})}})}downloadFile(n,t){let i=window.URL.createObjectURL(n),s=document.createElement("a");s.href=i,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i)}formatCurrency(n){return!n||isNaN(n)?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n)}formatNumber(n){return!n||isNaN(n)?"0":new Intl.NumberFormat("id-ID").format(n)}formatPercentage(n){return!n||isNaN(n)?"0.0%":`${n.toFixed(1)}%`}formatDate(n){return new Date(n).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})}getMaxRevenue(){return!this.financialReport||!this.financialReport.monthlyRevenue.length?0:Math.max(...this.financialReport.monthlyRevenue.map(n=>n.revenue))}static \u0275fac=function(t){return new(t||c)(y(j),y(A))};static \u0275cmp=D({type:c,selectors:[["app-financial-report"]],inputs:{dateRange:"dateRange"},outputs:{toast:"toast"},features:[$],decls:4,vars:3,consts:[[1,"financial-report-container"],["class","loading-overlay",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","report-content",4,"ngIf"],[1,"loading-overlay"],[1,"spinner"],[1,"empty-state"],[1,"empty-icon"],[1,"report-content"],[1,"export-actions"],[1,"btn-export",3,"click","disabled"],[1,"summary-grid"],[1,"summary-card","success"],[1,"card-icon"],[1,"card-info"],[1,"summary-card","info"],[1,"summary-card","danger"],[1,"summary-card","warning"],[1,"charts-row"],[1,"chart-card"],[1,"chart-content"],[1,"bar-chart"],["class","bar-item",4,"ngFor","ngForOf"],[1,"data-table-card"],[1,"card-header"],[4,"ngIf"],[1,"table-wrapper"],[1,"data-table"],[4,"ngFor","ngForOf"],["class","empty-table",4,"ngIf"],["class","data-table-card danger-card",4,"ngIf"],[1,"bar-item"],[1,"bar-label"],[1,"bar-wrapper"],[1,"bar-fill","bar-warning"],[1,"bar-value"],[1,"bar-percentage"],[1,"bar-fill","bar-success"],[1,"text-success"],[1,"badge"],[1,"empty-table"],[1,"data-table-card","danger-card"],[1,"badge","badge-danger"],[1,"text-danger"]],template:function(t,i){t&1&&(o(0,"div",0),C(1,ue,4,0,"div",1)(2,Ce,7,0,"div",2)(3,ve,79,13,"div",3),e()),t&2&&(r(),g("ngIf",i.isLoading),r(),g("ngIf",!i.financialReport&&!i.isLoading),r(),g("ngIf",i.financialReport&&!i.isLoading))},dependencies:[I,J,H,R],styles:[".financial-report-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.loading-overlay[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;gap:1rem}.loading-overlay[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #e2e8f0;border-top-color:#0ea5e9;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:.95rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.5rem;font-weight:700;color:#1e293b}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#64748b}.report-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.export-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;flex-wrap:wrap}.export-actions[_ngcontent-%COMP%]   .btn-export[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#0ea5e9;color:#fff;border:none;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s ease;white-space:nowrap}.export-actions[_ngcontent-%COMP%]   .btn-export[_ngcontent-%COMP%]:hover:not(:disabled){background:#0b83b9;transform:translateY(-2px);box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.export-actions[_ngcontent-%COMP%]   .btn-export[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;display:flex;align-items:center;gap:1.25rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:all .2s ease}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:60px;height:60px;display:flex;align-items:center;justify-content:center;border-radius:12px}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]{flex:1}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1.5rem;font-weight:700;color:#1e293b}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#64748b}.summary-grid[_ngcontent-%COMP%]   .summary-card.success[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981}.summary-grid[_ngcontent-%COMP%]   .summary-card.info[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6}.summary-grid[_ngcontent-%COMP%]   .summary-card.danger[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.summary-grid[_ngcontent-%COMP%]   .summary-card.warning[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b}.charts-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:1.5rem}.chart-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.chart-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.1rem;font-weight:600;color:#1e293b}.chart-card[_ngcontent-%COMP%]   .chart-content[_ngcontent-%COMP%]   .bar-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.chart-card[_ngcontent-%COMP%]   .chart-content[_ngcontent-%COMP%]   .bar-chart[_ngcontent-%COMP%]   .bar-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:120px 1fr 100px;align-items:center;gap:1rem}.chart-card[_ngcontent-%COMP%]   .chart-content[_ngcontent-%COMP%]   .bar-chart[_ngcontent-%COMP%]   .bar-item[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#1e293b}.chart-card[_ngcontent-%COMP%]   .chart-content[_ngcontent-%COMP%]   .bar-chart[_ngcontent-%COMP%]   .bar-item[_ngcontent-%COMP%]   .bar-wrapper[_ngcontent-%COMP%]{background:#f8fafc;border-radius:8px;height:32px;overflow:hidden;position:relative}.chart-card[_ngcontent-%COMP%]   .chart-content[_ngcontent-%COMP%]   .bar-chart[_ngcontent-%COMP%]   .bar-item[_ngcontent-%COMP%]   .bar-wrapper[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:flex-end;padding:0 .75rem;border-radius:8px;transition:width .5s ease}.chart-card[_ngcontent-%COMP%]   .chart-content[_ngcontent-%COMP%]   .bar-chart[_ngcontent-%COMP%]   .bar-item[_ngcontent-%COMP%]   .bar-wrapper[_ngcontent-%COMP%]   .bar-fill.bar-success[_ngcontent-%COMP%]{background:linear-gradient(90deg,#10b981,#14e8a2)}.chart-card[_ngcontent-%COMP%]   .chart-content[_ngcontent-%COMP%]   .bar-chart[_ngcontent-%COMP%]   .bar-item[_ngcontent-%COMP%]   .bar-wrapper[_ngcontent-%COMP%]   .bar-fill.bar-warning[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f59e0b,#f7b13c)}.chart-card[_ngcontent-%COMP%]   .chart-content[_ngcontent-%COMP%]   .bar-chart[_ngcontent-%COMP%]   .bar-item[_ngcontent-%COMP%]   .bar-wrapper[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]   .bar-value[_ngcontent-%COMP%]{font-size:.75rem;font-weight:700;color:#fff;white-space:nowrap}.chart-card[_ngcontent-%COMP%]   .chart-content[_ngcontent-%COMP%]   .bar-chart[_ngcontent-%COMP%]   .bar-item[_ngcontent-%COMP%]   .bar-percentage[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#64748b;text-align:right}.data-table-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.data-table-card.danger-card[_ngcontent-%COMP%]{border:2px solid rgba(239,68,68,.2);background:linear-gradient(to bottom,#ef444405,#fff)}.data-table-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:2px solid #e2e8f0}.data-table-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:700;color:#1e293b}.data-table-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#10b981;font-size:.8rem;font-weight:600}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;border-radius:8px;border:1px solid #e2e8f0}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.875rem}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f8fafc}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem;text-align:left;font-weight:600;color:#1e293b;border-bottom:2px solid #e2e8f0;white-space:nowrap}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0;transition:all .2s ease}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#0ea5e905}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;color:#1e293b}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.text-success[_ngcontent-%COMP%]{color:#10b981}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.text-danger[_ngcontent-%COMP%]{color:#ef4444}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:6px;font-size:.75rem;font-weight:600}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge.badge-success[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge.badge-warning[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .badge.badge-danger[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.data-table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .empty-table[_ngcontent-%COMP%]{padding:3rem 2rem;text-align:center;color:#64748b;font-size:.95rem}.text-success[_ngcontent-%COMP%]{color:#10b981!important}.text-danger[_ngcontent-%COMP%]{color:#ef4444!important}.text-warning[_ngcontent-%COMP%]{color:#f59e0b!important}@media (max-width: 1024px){.charts-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.chart-card[_ngcontent-%COMP%]   .bar-chart[_ngcontent-%COMP%]   .bar-item[_ngcontent-%COMP%]{grid-template-columns:100px 1fr 80px;gap:.5rem}.chart-card[_ngcontent-%COMP%]   .bar-chart[_ngcontent-%COMP%]   .bar-item[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{font-size:.75rem}.data-table-card[_ngcontent-%COMP%]{padding:1rem}.data-table-card[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]{font-size:.75rem}.data-table-card[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table-card[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem}.export-actions[_ngcontent-%COMP%]{flex-direction:column}.export-actions[_ngcontent-%COMP%]   .btn-export[_ngcontent-%COMP%]{width:100%}}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f8fafc;border-radius:4px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#e2e8f0;border-radius:4px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#64748b}"]})};function ye(c,n){if(c&1){let t=O();o(0,"app-student-report",25),p("toast",function(s){_(t);let m=d();return u(m.onToast(s))}),e()}if(c&2){let t=d();g("dateRange",t.dateRange)}}function Se(c,n){if(c&1){let t=O();o(0,"app-coach-report",25),p("toast",function(s){_(t);let m=d();return u(m.onToast(s))}),e()}if(c&2){let t=d();g("dateRange",t.dateRange)}}function we(c,n){if(c&1){let t=O();o(0,"app-financial-report",25),p("toast",function(s){_(t);let m=d();return u(m.onToast(s))}),e()}if(c&2){let t=d();g("dateRange",t.dateRange)}}function Ee(c,n){c&1&&(o(0,"span"),a(1,"\u2705"),e())}function De(c,n){c&1&&(o(0,"span"),a(1,"\u274C"),e())}function ke(c,n){c&1&&(o(0,"span"),a(1,"\u2139\uFE0F"),e())}function Ie(c,n){c&1&&(o(0,"span"),a(1,"\u26A0\uFE0F"),e())}var Ct=class c{constructor(n,t){this.authService=n;this.platformId=t;this.isBrowser=pt(this.platformId)}isBrowser;currentRole=null;isAdmin=!1;activeTab="student";dateRange={startDate:this.formatDateForInput(this.getFirstDayOfMonth()),endDate:this.formatDateForInput(this.getLastDayOfMonth())};showNotification=!1;notificationMessage="";notificationType="success";ngOnInit(){if(console.log("\u{1F4CA} Reports container initialized"),this.isBrowser){let n=this.authService.getUser();this.currentRole=n?.role||null,this.isAdmin=this.currentRole==="admin",console.log("\u{1F464} Current role:",this.currentRole),console.log("\u{1F510} Is admin:",this.isAdmin)}this.isAdmin||(this.activeTab="student",console.log("\u2139\uFE0F Non-admin user - defaulting to student report"))}ngOnDestroy(){}switchTab(n){if(n==="financial"&&!this.isAdmin){console.warn("\u26D4 Non-admin user attempted to access financial report"),this.showToast("Anda tidak memiliki akses ke laporan keuangan","warning");return}console.log(`\u{1F4D1} Switching to ${n} tab`),this.activeTab=n}getFirstDayOfMonth(){let n=new Date;return new Date(n.getFullYear(),n.getMonth(),1)}getLastDayOfMonth(){let n=new Date;return new Date(n.getFullYear(),n.getMonth()+1,0)}formatDateForInput(n){let t=n.getFullYear(),i=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0");return`${t}-${i}-${s}`}getCurrentMonth(){return new Date().toLocaleDateString("id-ID",{month:"long",year:"numeric"})}applyDateFilter(){if(!this.dateRange.startDate||!this.dateRange.endDate){this.showToast("Silakan pilih tanggal mulai dan akhir","warning");return}let n=new Date(this.dateRange.startDate),t=new Date(this.dateRange.endDate);if(n>t){this.showToast("Tanggal mulai tidak boleh lebih besar dari tanggal akhir","warning");return}if(Math.floor((t.getTime()-n.getTime())/(1e3*60*60*24))>365){this.showToast("Rentang tanggal maksimal 1 tahun","warning");return}this.dateRange=ct({},this.dateRange)}setThisMonth(){this.dateRange={startDate:this.formatDateForInput(this.getFirstDayOfMonth()),endDate:this.formatDateForInput(this.getLastDayOfMonth())}}setLastMonth(){let n=new Date,t=new Date(n.getFullYear(),n.getMonth()-1,1),i=new Date(n.getFullYear(),n.getMonth(),0);this.dateRange={startDate:this.formatDateForInput(t),endDate:this.formatDateForInput(i)}}setThisYear(){let n=new Date;this.dateRange={startDate:this.formatDateForInput(new Date(n.getFullYear(),0,1)),endDate:this.formatDateForInput(new Date(n.getFullYear(),11,31))}}showToast(n,t="success"){this.notificationMessage=n,this.notificationType=t,this.showNotification=!0,setTimeout(()=>{this.hideToast()},5e3)}hideToast(){this.showNotification=!1}onToast(n){this.showToast(n.message,n.type)}static \u0275fac=function(t){return new(t||c)(y(X),y(st))};static \u0275cmp=D({type:c,selectors:[["app-reports"]],decls:62,vars:28,consts:[[1,"reports-container"],[1,"page-header"],[1,"header-left"],[1,"filter-section"],[1,"date-range-filter"],[1,"filter-label"],[1,"date-inputs"],[1,"date-group"],["type","date",3,"ngModelChange","ngModel"],[1,"filter-actions"],[1,"btn-quick",3,"click"],[1,"btn-apply",3,"click"],[1,"tab-navigation"],[1,"tab-button",3,"click"],[1,"tab-icon"],[1,"tab-label"],[1,"tab-content-wrapper"],[3,"dateRange","toast",4,"ngIf"],[1,"toast-notification"],[1,"toast-content"],[1,"toast-icon"],[4,"ngIf"],[1,"toast-message"],[1,"toast-close",3,"click"],[1,"toast-progress"],[3,"toast","dateRange"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),a(4,"\u{1F4CA} Laporan"),e(),o(5,"p"),a(6,"Laporan Siswa, Pelatih, dan Keuangan"),e()()(),o(7,"div",3)(8,"div",4)(9,"div",5)(10,"span"),a(11,"\u{1F4C5} Periode Laporan:"),e()(),o(12,"div",6)(13,"div",7)(14,"label"),a(15,"Dari"),e(),o(16,"input",8),N("ngModelChange",function(m){return z(i.dateRange.startDate,m)||(i.dateRange.startDate=m),m}),e()(),o(17,"div",7)(18,"label"),a(19,"Sampai"),e(),o(20,"input",8),N("ngModelChange",function(m){return z(i.dateRange.endDate,m)||(i.dateRange.endDate=m),m}),e()()(),o(21,"div",9)(22,"button",10),p("click",function(){return i.setThisMonth()}),a(23,"Bulan Ini"),e(),o(24,"button",10),p("click",function(){return i.setLastMonth()}),a(25,"Bulan Lalu"),e(),o(26,"button",10),p("click",function(){return i.setThisYear()}),a(27,"Tahun Ini"),e(),o(28,"button",11),p("click",function(){return i.applyDateFilter()}),a(29,"\u{1F50D} Terapkan"),e()()()(),o(30,"div",12)(31,"button",13),p("click",function(){return i.switchTab("student")}),o(32,"span",14),a(33,"\u{1F465}"),e(),o(34,"span",15),a(35,"Laporan Siswa"),e()(),o(36,"button",13),p("click",function(){return i.switchTab("coach")}),o(37,"span",14),a(38,"\u{1F3CA}\u200D\u2642\uFE0F"),e(),o(39,"span",15),a(40,"Laporan Pelatih"),e()(),o(41,"button",13),p("click",function(){return i.switchTab("financial")}),o(42,"span",14),a(43,"\u{1F4B0}"),e(),o(44,"span",15),a(45,"Laporan Keuangan"),e()()(),o(46,"div",16),C(47,ye,1,1,"app-student-report",17)(48,Se,1,1,"app-coach-report",17)(49,we,1,1,"app-financial-report",17),e()(),o(50,"div",18)(51,"div",19)(52,"span",20),C(53,Ee,2,0,"span",21)(54,De,2,0,"span",21)(55,ke,2,0,"span",21)(56,Ie,2,0,"span",21),e(),o(57,"span",22),a(58),e(),o(59,"button",23),p("click",function(){return i.hideToast()}),a(60,"\u2715"),e()(),S(61,"div",24),e()),t&2&&(r(16),F("ngModel",i.dateRange.startDate),r(4),F("ngModel",i.dateRange.endDate),r(11),P("active",i.activeTab==="student"),r(5),P("active",i.activeTab==="coach"),r(5),P("active",i.activeTab==="financial"),r(6),g("ngIf",i.activeTab==="student"),r(),g("ngIf",i.activeTab==="coach"),r(),g("ngIf",i.activeTab==="financial"),r(),P("show",i.showNotification)("success",i.notificationType==="success")("error",i.notificationType==="error")("info",i.notificationType==="info")("warning",i.notificationType==="warning"),r(3),g("ngIf",i.notificationType==="success"),r(),g("ngIf",i.notificationType==="error"),r(),g("ngIf",i.notificationType==="info"),r(),g("ngIf",i.notificationType==="warning"),r(2),l(i.notificationMessage),r(3),P("animate",i.showNotification))},dependencies:[I,H,R,U,B,W,Z,tt,et],styles:['.reports-container[_ngcontent-%COMP%]{padding:2rem;min-height:100vh;background:#f8fafc}@media (max-width: 768px){.reports-container[_ngcontent-%COMP%]{padding:1rem}}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;gap:1rem}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:2rem;font-weight:700;color:#1e293b}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#64748b;font-size:.95rem}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}.filter-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;margin-bottom:2rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;font-size:.95rem}.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   .date-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;flex:1;min-width:200px}.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   .date-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#64748b}.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   .date-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:.75rem;border:2px solid #e2e8f0;border-radius:8px;font-size:.95rem;transition:all .2s ease}.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   .date-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{outline:none;border-color:#0ea5e9;box-shadow:0 0 0 3px #0ea5e91a}.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   .btn-quick[_ngcontent-%COMP%]{padding:.5rem 1rem;border:2px solid #e2e8f0;background:#fff;color:#1e293b;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease}.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   .btn-quick[_ngcontent-%COMP%]:hover{border-color:#0ea5e9;color:#0ea5e9}.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   .btn-apply[_ngcontent-%COMP%]{padding:.5rem 1.5rem;background:#0ea5e9;color:#fff;border:none;border-radius:8px;font-size:.875rem;font-weight:600;cursor:pointer;transition:all .2s ease;margin-left:auto}.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   .btn-apply[_ngcontent-%COMP%]:hover{background:#0b83b9}@media (max-width: 768px){.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]{flex-direction:column}.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   .date-group[_ngcontent-%COMP%]{min-width:100%}.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{flex-direction:column}.filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   .btn-quick[_ngcontent-%COMP%], .filter-section[_ngcontent-%COMP%]   .date-range-filter[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   .btn-apply[_ngcontent-%COMP%]{width:100%;margin-left:0}}.tab-navigation[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:2rem;flex-wrap:wrap}.tab-navigation[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]{flex:1;min-width:180px;padding:1rem 1.5rem;background:#fff;border:2px solid #e2e8f0;border-radius:12px;display:flex;align-items:center;justify-content:center;gap:.75rem;cursor:pointer;transition:all .2s ease;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.tab-navigation[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{font-size:1.5rem}.tab-navigation[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;color:#1e293b}.tab-navigation[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;border-color:#0ea5e9}.tab-navigation[_ngcontent-%COMP%]   .tab-button.active[_ngcontent-%COMP%]{background:#0ea5e9;border-color:#0ea5e9;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.tab-navigation[_ngcontent-%COMP%]   .tab-button.active[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%]{color:#fff}@media (max-width: 768px){.tab-navigation[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]{min-width:100%}}.tab-content-wrapper[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.toast-notification[_ngcontent-%COMP%]{position:fixed;top:2rem;right:2rem;min-width:320px;max-width:500px;background:#fff;border-radius:12px;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;transform:translate(calc(100% + 2rem));transition:transform .3s ease;z-index:1100;overflow:hidden}.toast-notification.show[_ngcontent-%COMP%]{transform:translate(0)}.toast-notification.success[_ngcontent-%COMP%]{border-left:4px solid #10b981}.toast-notification.error[_ngcontent-%COMP%]{border-left:4px solid #ef4444}.toast-notification.info[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.toast-notification.warning[_ngcontent-%COMP%]{border-left:4px solid #f59e0b}.toast-notification[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 1.5rem}.toast-notification[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{font-size:1.5rem;flex-shrink:0}.toast-notification[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]   .toast-message[_ngcontent-%COMP%]{flex:1;font-size:.95rem;color:#1e293b;font-weight:500}.toast-notification[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]   .toast-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.25rem;color:#64748b;cursor:pointer;width:28px;height:28px;display:flex;align-items:center;justify-content:center;border-radius:6px;transition:all .2s ease;flex-shrink:0}.toast-notification[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]   .toast-close[_ngcontent-%COMP%]:hover{background:#f8fafc;color:#1e293b}.toast-notification[_ngcontent-%COMP%]   .toast-progress[_ngcontent-%COMP%]{height:3px;background:#e2e8f0;position:relative;overflow:hidden}.toast-notification[_ngcontent-%COMP%]   .toast-progress.animate[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;height:100%;width:100%;background:currentColor;animation:_ngcontent-%COMP%_progress 5s linear}.toast-notification.success[_ngcontent-%COMP%]   .toast-progress.animate[_ngcontent-%COMP%]:before{background:#10b981}.toast-notification.error[_ngcontent-%COMP%]   .toast-progress.animate[_ngcontent-%COMP%]:before{background:#ef4444}.toast-notification.info[_ngcontent-%COMP%]   .toast-progress.animate[_ngcontent-%COMP%]:before{background:#3b82f6}.toast-notification.warning[_ngcontent-%COMP%]   .toast-progress.animate[_ngcontent-%COMP%]:before{background:#f59e0b}@keyframes _ngcontent-%COMP%_progress{0%{transform:translate(-100%)}to{transform:translate(0)}}@media (max-width: 768px){.toast-notification[_ngcontent-%COMP%]{top:1rem;right:1rem;left:1rem;min-width:auto}}@media print{.reports-container[_ngcontent-%COMP%]{padding:0;background:#fff}.filter-section[_ngcontent-%COMP%], .tab-navigation[_ngcontent-%COMP%], .toast-notification[_ngcontent-%COMP%]{display:none!important}}']})};export{Ct as Reports};
